import{w as le,j as t,g as ye,a as Ce,r as h,u as me,i as je,aB as ae,c as W,b as re,s as ce,d as v,e as Se,m as $e,f as V,aC as ke,aD as oe,aE as Pe,aF as we,aG as Ie,av as Re,E as Me,aH as Ne,M as Qe,S as j,z as C,R as B,C as Z,x as de,B as ue,a5 as Q,af as Y,ag as ze,P as X,au as Ee}from"./index-CUL5stip.js";import{r as Oe,u as Te}from"./xlsx-DSqvgYLF.js";import{U as se,R as Ae}from"./Upload-CTL0uo5k.js";import{A as pe,a as ge,b as fe}from"./AccordionSummary-wC8Kw5w3.js";import{C as Fe}from"./Checkbox-Sxt98_kC.js";const De=le(t.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function Be(e){return Ce("MuiChip",e)}const i=ye("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Le=e=>{const{classes:a,disabled:r,size:s,color:l,iconColor:x,onDelete:u,clickable:n,variant:c}=e,o={root:["root",c,r&&"disabled",`size${v(s)}`,`color${v(l)}`,n&&"clickable",n&&`clickableColor${v(l)}`,u&&"deletable",u&&`deletableColor${v(l)}`,`${c}${v(l)}`],label:["label",`label${v(s)}`],avatar:["avatar",`avatar${v(s)}`,`avatarColor${v(l)}`],icon:["icon",`icon${v(s)}`,`iconColor${v(x)}`],deleteIcon:["deleteIcon",`deleteIcon${v(s)}`,`deleteIconColor${v(l)}`,`deleteIcon${v(c)}Color${v(l)}`]};return Se(o,Be,a)},Ue=ce("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e,{color:s,iconColor:l,clickable:x,onDelete:u,size:n,variant:c}=r;return[{[`& .${i.avatar}`]:a.avatar},{[`& .${i.avatar}`]:a[`avatar${v(n)}`]},{[`& .${i.avatar}`]:a[`avatarColor${v(s)}`]},{[`& .${i.icon}`]:a.icon},{[`& .${i.icon}`]:a[`icon${v(n)}`]},{[`& .${i.icon}`]:a[`iconColor${v(l)}`]},{[`& .${i.deleteIcon}`]:a.deleteIcon},{[`& .${i.deleteIcon}`]:a[`deleteIcon${v(n)}`]},{[`& .${i.deleteIcon}`]:a[`deleteIconColor${v(s)}`]},{[`& .${i.deleteIcon}`]:a[`deleteIcon${v(c)}Color${v(s)}`]},a.root,a[`size${v(n)}`],a[`color${v(s)}`],x&&a.clickable,x&&s!=="default"&&a[`clickableColor${v(s)})`],u&&a.deletable,u&&s!=="default"&&a[`deletableColor${v(s)}`],a[c],a[`${c}${v(s)}`]]}})($e(({theme:e})=>{const a=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${i.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${i.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:a,fontSize:e.typography.pxToRem(12)},[`& .${i.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${i.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${i.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${i.icon}`]:{marginLeft:5,marginRight:-6},[`& .${i.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.alpha((e.vars||e).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.alpha((e.vars||e).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${i.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${i.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(V(["contrastText"])).map(([r])=>({props:{color:r},style:{backgroundColor:(e.vars||e).palette[r].main,color:(e.vars||e).palette[r].contrastText,[`& .${i.deleteIcon}`]:{color:e.alpha((e.vars||e).palette[r].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[r].contrastText}}}})),{props:r=>r.iconColor===r.color,style:{[`& .${i.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:a}}},{props:r=>r.iconColor===r.color&&r.color!=="default",style:{[`& .${i.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${i.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}}},...Object.entries(e.palette).filter(V(["dark"])).map(([r])=>({props:{color:r,onDelete:!0},style:{[`&.${i.focusVisible}`]:{background:(e.vars||e).palette[r].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)},[`&.${i.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.action.selected,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(V(["dark"])).map(([r])=>({props:{color:r,clickable:!0},style:{[`&:hover, &.${i.focusVisible}`]:{backgroundColor:(e.vars||e).palette[r].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${i.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${i.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${i.avatar}`]:{marginLeft:4},[`& .${i.avatarSmall}`]:{marginLeft:2},[`& .${i.icon}`]:{marginLeft:4},[`& .${i.iconSmall}`]:{marginLeft:2},[`& .${i.deleteIcon}`]:{marginRight:5},[`& .${i.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(V()).map(([r])=>({props:{variant:"outlined",color:r},style:{color:(e.vars||e).palette[r].main,border:`1px solid ${e.alpha((e.vars||e).palette[r].main,.7)}`,[`&.${i.clickable}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette[r].main,(e.vars||e).palette.action.hoverOpacity)},[`&.${i.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette[r].main,(e.vars||e).palette.action.focusOpacity)},[`& .${i.deleteIcon}`]:{color:e.alpha((e.vars||e).palette[r].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[r].main}}}}))]}})),We=ce("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,a)=>{const{ownerState:r}=e,{size:s}=r;return[a.label,a[`label${v(s)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function ne(e){return e.key==="Backspace"||e.key==="Delete"}const Ve=h.forwardRef(function(a,r){const s=me({props:a,name:"MuiChip"}),{avatar:l,className:x,clickable:u,color:n="default",component:c,deleteIcon:o,disabled:d=!1,icon:g,label:S,onClick:k,onDelete:p,onKeyDown:f,onKeyUp:b,size:m="medium",variant:$="filled",tabIndex:P,skipFocusWhenDisabled:I=!1,slots:R={},slotProps:N={},...O}=s,K=h.useRef(null),_=je(K,r),L=y=>{y.stopPropagation(),p&&p(y)},H=y=>{y.currentTarget===y.target&&ne(y)&&y.preventDefault(),f&&f(y)},J=y=>{y.currentTarget===y.target&&p&&ne(y)&&p(y),b&&b(y)},T=u!==!1&&k?!0:u,z=T||p?ae:c||"div",A={...s,component:z,disabled:d,size:m,color:n,iconColor:h.isValidElement(g)&&g.props.color||n,onDelete:!!p,clickable:T,variant:$},w=Le(A),G=z===ae?{component:c||"div",focusVisibleClassName:w.focusVisible,...p&&{disableRipple:!0}}:{};let F=null;p&&(F=o&&h.isValidElement(o)?h.cloneElement(o,{className:W(o.props.className,w.deleteIcon),onClick:L}):t.jsx(De,{className:w.deleteIcon,onClick:L}));let U=null;l&&h.isValidElement(l)&&(U=h.cloneElement(l,{className:W(w.avatar,l.props.className)}));let D=null;g&&h.isValidElement(g)&&(D=h.cloneElement(g,{className:W(w.icon,g.props.className)}));const E={slots:R,slotProps:N},[te,ve]=re("root",{elementType:Ue,externalForwardedProps:{...E,...O},ownerState:A,shouldForwardComponentProp:!0,ref:_,className:W(w.root,x),additionalProps:{disabled:T&&d?!0:void 0,tabIndex:I&&d?-1:P,...G},getSlotProps:y=>({...y,onClick:M=>{y.onClick?.(M),k?.(M)},onKeyDown:M=>{y.onKeyDown?.(M),H(M)},onKeyUp:M=>{y.onKeyUp?.(M),J(M)}})}),[be,he]=re("label",{elementType:We,externalForwardedProps:E,ownerState:A,className:w.label});return t.jsxs(te,{as:z,...ve,children:[U||D,t.jsx(be,{...he,children:S}),F]})}),xe=le(t.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));var qe=class extends ke{constructor(e,a){super(e,a)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:oe()})}getOptimisticResult(e){return e.behavior=oe(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,a){const{state:r}=e,s=super.createResult(e,a),{isFetching:l,isRefetching:x,isError:u,isRefetchError:n}=s,c=r.fetchMeta?.fetchMore?.direction,o=u&&c==="forward",d=l&&c==="forward",g=u&&c==="backward",S=l&&c==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:we(a,r.data),hasPreviousPage:Pe(a,r.data),isFetchNextPageError:o,isFetchingNextPage:d,isFetchPreviousPageError:g,isFetchingPreviousPage:S,isRefetchError:n&&!o&&!g,isRefetching:x&&!d&&!S}}};function Ke(e,a){return Ie(e,qe)}const _e={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95%",maxWidth:900,maxHeight:"90vh",bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:4,overflowY:"auto"};function He({onSubmit:e}){const[a,r]=h.useState({question:"",marks:1,negative:0,topic:"",category:"MCQ",answer:"",options:Array(4).fill({text:"",isCorrect:!1})}),[s,l]=h.useState(!1),x=(o,d)=>{const g=[...a.options];g[o]={...g[o],text:d},r({...a,options:g})},u=o=>{const d=a.options.map((g,S)=>({...g,isCorrect:S===o}));r({...a,options:d})},n=o=>{const d=[...a.options];d[o].isCorrect=!d[o].isCorrect,r({...a,options:d})},c=async()=>{try{l(!0),await e([a]),r({question:"",marks:1,negative:0,topic:"",category:"MCQ",answer:"",options:Array(4).fill({text:"",isCorrect:!1})})}catch(o){console.error(o)}finally{l(!1)}};return t.jsxs(j,{className:"space-y-4",children:[t.jsx(Q,{size:"small",label:"Question Text",fullWidth:!0,multiline:!0,value:a.question,onChange:o=>r({...a,question:o.target.value})}),t.jsx(Q,{size:"small",label:"Topic",fullWidth:!0,value:a.topic,onChange:o=>r({...a,topic:o.target.value})}),t.jsx(Q,{size:"small",label:"Marks",type:"number",value:a.marks,onChange:o=>r({...a,marks:parseFloat(o.target.value)})}),t.jsx(Q,{size:"small",label:"Negative Marks",type:"number",value:a.negative,onChange:o=>r({...a,negative:parseFloat(o.target.value)})}),t.jsxs(Q,{size:"small",select:!0,label:"Category",fullWidth:!0,value:a.category,onChange:o=>{const d=o.target.value,g=Array(4).fill({text:"",isCorrect:!1});r({...a,category:d,options:g,answer:""})},children:[t.jsx(Y,{value:"MCQ",children:"MCQ"}),t.jsx(Y,{value:"MSQ",children:"MSQ"}),t.jsx(Y,{value:"Text",children:"Text"})]}),a.category==="Text"&&t.jsx(Q,{size:"small",label:"Answer",fullWidth:!0,value:a.answer,onChange:o=>r({...a,answer:o.target.value})}),(a.category==="MCQ"||a.category==="MSQ")&&t.jsxs(j,{children:[t.jsx(C,{sx:{my:1},className:"mb-5 font-medium",children:"Options (4 required):"}),a.options.map((o,d)=>t.jsxs(j,{className:"flex items-center gap-2 mb-2",children:[a.category==="MCQ"?t.jsx(Ae,{size:"small",checked:o.isCorrect,onChange:()=>u(d)}):t.jsx(Fe,{size:"small",checked:o.isCorrect,onChange:()=>n(d)}),t.jsx(Q,{size:"small",fullWidth:!0,label:`Option ${d+1}`,value:o.text,onChange:g=>x(d,g.target.value)})]},d))]}),t.jsx(B,{variant:"contained",onClick:c,disabled:s,children:s?"Submitting...":"Add Question"})]})}function Je({open:e,onClose:a,onSuccess:r,bankId:s}){const[l,x]=h.useState(null),[u,n]=h.useState([]),c=Re(),{enqueueSnackbar:o}=Me(),{mutateAsync:d,isPending:g}=Ne({mutationFn:async f=>{await de.post(`${ue}/api/admin/add/questionbanks/questions/${s}/`,f,{withCredentials:!0})},onSuccess:()=>{o("Questions added successfully!",{variant:"success"}),c.invalidateQueries({queryKey:["questionBank",s]}),a(),r()},onError:f=>{o(f?.response?.data?.message||"Failed to add questions",{variant:"error"})}}),S=async f=>{const b=f.target.files?.[0];if(b)try{const m=await b.text(),$=JSON.parse(m);n($)}catch{x("Invalid JSON format")}},k=async f=>{const b=f.target.files?.[0];if(b)try{const m=await b.arrayBuffer(),$=Oe(m,{type:"array"}),P=$.Sheets[$.SheetNames[0]],R=Te.sheet_to_json(P).map(N=>{const{question:O,category:K,marks:_,negative:L,topic:H,answer:J,option1:T,correct1:z,option2:A,correct2:w,option3:G,correct3:F,option4:U,correct4:D}=N,E={question:O||"",category:K||"MCQ",marks:parseFloat(_)||1,negative:parseFloat(L)||0,topic:H||""};return E.category==="Text"?{...E,answer:J||"",options:[]}:{...E,options:[{text:T||"",isCorrect:z===!0||z==="true"},{text:A||"",isCorrect:w===!0||w==="true"},{text:G||"",isCorrect:F===!0||F==="true"},{text:U||"",isCorrect:D===!0||D==="true"}]}});n(R)}catch{x("Invalid Excel format")}},p=async f=>{await d(f)};return t.jsx(Qe,{open:e,onClose:a,children:t.jsxs(j,{sx:_e,children:[t.jsx(C,{variant:"h6",className:"mb-4",children:"Add Questions to Section"}),t.jsxs("div",{className:"flex gap-4 mb-4",children:[t.jsxs(B,{variant:"outlined",component:"label",startIcon:t.jsx(se,{fontSize:"small"}),children:["Upload JSON",t.jsx("input",{type:"file",accept:".json",hidden:!0,onChange:S})]}),t.jsxs(B,{variant:"outlined",component:"label",startIcon:t.jsx(se,{fontSize:"small"}),children:["Upload Excel",t.jsx("input",{type:"file",accept:".xlsx,.xls",hidden:!0,onChange:k})]})]}),l&&t.jsx(C,{color:"error",variant:"body2",className:"mb-2",children:l}),t.jsx(C,{variant:"subtitle1",className:"mb-2 font-semibold",children:"Manual Entry"}),t.jsx(He,{onSubmit:p}),u.length>0&&t.jsxs(j,{className:"mt-6",children:[t.jsxs(C,{variant:"subtitle1",className:"mb-2 font-semibold",children:["Preview Uploaded Questions (",u.length,")"]}),u.map((f,b)=>t.jsxs(pe,{defaultExpanded:b===0,children:[t.jsx(ge,{expandIcon:t.jsx(xe,{}),children:t.jsxs(C,{children:["Q",b+1,": ",f.question.slice(0,80),"..."]})}),t.jsxs(fe,{children:[t.jsxs(C,{children:[t.jsx("strong",{children:"Topic:"})," ",f.topic]}),t.jsxs(C,{children:[t.jsx("strong",{children:"Marks:"})," ",f.marks]}),t.jsxs(C,{children:[t.jsx("strong",{children:"Negative:"})," ",f.negative]}),t.jsxs(C,{children:[t.jsx("strong",{children:"Category:"})," ",f.category]}),f.category==="Text"&&t.jsxs(C,{children:[t.jsx("strong",{children:"Answer:"})," ",f.answer]}),(f.category==="MCQ"||f.category==="MSQ")&&t.jsx(j,{className:"mt-2 space-y-1",children:f.options?.map((m,$)=>t.jsxs(C,{children:[m.isCorrect?"✅":"⬜️"," Option ",$+1,": ",m.text]},$))})]})]},b)),t.jsx(B,{className:"mt-4",variant:"contained",disabled:g,onClick:()=>p(u),children:g?"Submitting...":"Submit All Previewed Questions"})]}),g&&t.jsx(Z,{className:"mt-4"})]})})}var ee=new Map,q=new WeakMap,ie=0,Ge;function Ye(e){return e?(q.has(e)||(ie+=1,q.set(e,ie.toString())),q.get(e)):"0"}function Xe(e){return Object.keys(e).sort().filter(a=>e[a]!==void 0).map(a=>`${a}_${a==="root"?Ye(e.root):e[a]}`).toString()}function Ze(e){const a=Xe(e);let r=ee.get(a);if(!r){const s=new Map;let l;const x=new IntersectionObserver(u=>{u.forEach(n=>{var c;const o=n.isIntersecting&&l.some(d=>n.intersectionRatio>=d);e.trackVisibility&&typeof n.isVisible>"u"&&(n.isVisible=o),(c=s.get(n.target))==null||c.forEach(d=>{d(o,n)})})},e);l=x.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:a,observer:x,elements:s},ee.set(a,r)}return r}function et(e,a,r={},s=Ge){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const c=e.getBoundingClientRect();return a(s,{isIntersecting:s,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:l,observer:x,elements:u}=Ze(r),n=u.get(e)||[];return u.has(e)||u.set(e,n),n.push(a),x.observe(e),function(){n.splice(n.indexOf(a),1),n.length===0&&(u.delete(e),x.unobserve(e)),u.size===0&&(x.disconnect(),ee.delete(l))}}function tt({threshold:e,delay:a,trackVisibility:r,rootMargin:s,root:l,triggerOnce:x,skip:u,initialInView:n,fallbackInView:c,onChange:o}={}){var d;const[g,S]=h.useState(null),k=h.useRef(o),p=h.useRef(n),[f,b]=h.useState({inView:!!n,entry:void 0});k.current=o,h.useEffect(()=>{if(p.current===void 0&&(p.current=n),u||!g)return;let I;return I=et(g,(R,N)=>{const O=p.current;p.current=R,!(O===void 0&&!R)&&(b({inView:R,entry:N}),k.current&&k.current(R,N),N.isIntersecting&&x&&I&&(I(),I=void 0))},{root:l,rootMargin:s,threshold:e,trackVisibility:r,delay:a},c),()=>{I&&I()}},[Array.isArray(e)?e.toString():e,g,l,s,x,u,r,c,a]);const m=(d=f.entry)==null?void 0:d.target,$=h.useRef(void 0);!g&&m&&!x&&!u&&$.current!==m&&($.current=m,b({inView:!!n,entry:void 0}),p.current=n);const P=[S,f.inView,f.entry];return P.ref=P[0],P.inView=P[1],P.entry=P[2],P}function it(){const{slug:e}=ze(),[a,r]=h.useState(!1),{ref:s,inView:l}=tt(),{data:x,fetchNextPage:u,hasNextPage:n,isFetchingNextPage:c,isLoading:o,isError:d,refetch:g}=Ke({queryKey:["questionBank",e],queryFn:async({pageParam:p})=>(await de.get(`${ue}/api/admin/get/questionbank/questions/${e}?page=${p}&limit=10`,{withCredentials:!0})).data,initialPageParam:1,getNextPageParam:p=>p.hasMore?p.page+1:void 0,enabled:!!e}),S=x?.pages?.[0]?.bankDetails,k=x?x.pages.flatMap(p=>p.questions):[];return l&&n&&!c&&u(),t.jsxs(j,{mx:"auto",px:2,py:4,children:[t.jsxs(X,{elevation:3,sx:{p:4,borderRadius:3,mb:5,display:"flex",flexDirection:"column",gap:2},children:[a&&t.jsx(Je,{open:!0,onSuccess:()=>{r(!1),g()},onClose:()=>r(!1),bankId:e||""}),t.jsx(C,{variant:"h5",fontWeight:"bold",children:S?.name||"Question Bank"}),t.jsxs(C,{variant:"body2",color:"text.secondary",children:["Category: ",S?.category||"N/A"]}),t.jsx(Ee,{direction:"row",spacing:2,mt:1,children:t.jsx(B,{variant:"contained",color:"primary",onClick:()=>r(!0),sx:{textTransform:"none",borderRadius:2},children:"Add Question"})})]}),o&&t.jsx(j,{textAlign:"center",py:4,children:t.jsx(Z,{})}),d&&t.jsx(C,{color:"error",textAlign:"center",children:"Failed to load questions."}),t.jsx(j,{display:"flex",flexWrap:"wrap",gap:2,children:k.map((p,f)=>t.jsx(j,{flex:"1 1 calc(33.33% - 16px)",minWidth:"300px",children:t.jsxs(pe,{sx:{borderRadius:2},children:[t.jsx(ge,{expandIcon:t.jsx(xe,{}),children:t.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[t.jsx(C,{fontWeight:600,flex:1,pr:1,children:p.question||p.title||"Untitled Question"}),t.jsx(Ve,{label:p.category,color:"primary",variant:"outlined",size:"small"})]})}),t.jsx(fe,{children:p.category==="MCQ"?t.jsx(j,{display:"flex",flexWrap:"wrap",gap:1,children:p.options?.map((b,m)=>t.jsx(j,{flex:"1 1 calc(50% - 8px)",children:t.jsxs(X,{elevation:1,sx:{p:1,bgcolor:b.isCorrect?"#dcfce7":"#f3f4f6",border:b.isCorrect?"1px solid #22c55e":"1px solid #d1d5db"},children:[String.fromCharCode(65+m),". ",b.text]})},b._id||m))}):t.jsxs(j,{mt:2,children:[t.jsx(C,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Answer:"}),t.jsx(X,{variant:"outlined",sx:{p:1},children:t.jsx(C,{children:p.answer||"Not Provided"})})]})})]})},p._id||f))}),t.jsx(j,{ref:s,display:"flex",justifyContent:"center",py:3,children:c&&t.jsx(Z,{size:24})}),!n&&!o&&t.jsx(C,{textAlign:"center",mt:3,color:"text.secondary",children:"No more questions."})]})}export{it as default};
