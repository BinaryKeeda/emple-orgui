const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddQuestionAiken-Dm9ZptfW.js","assets/index-CEMFlCi4.js","assets/index-C6qephUP.css","assets/index-CwxkN5p8.js","assets/tslib.es6-BYppDQt_.js","assets/UploadFile-BfGEpAD4.js","assets/Button-DwPzP1N8.js","assets/AddQuestionJson-D9QWmGw4.js","assets/AddQuestionExcel-BC55sJFK.js","assets/xlsx-DSqvgYLF.js"])))=>i.map(i=>d[i]);
import{E as we,j as r,r as d,Z as P,I as Se,G as Ne,e as J,B as G,a as De,X as Ie,_ as ce}from"./index-CEMFlCi4.js";import{T as w,c as pe,S as he}from"./TextField-CBgjTSJO.js";import{M}from"./MenuItem-Cy4sf0OO.js";import{B as q}from"./Button-DwPzP1N8.js";import{U as se,C as Ae}from"./UploadFile-BfGEpAD4.js";import{C as Re}from"./Checkbox-CUA8ugq3.js";import{A as Pe,a as qe,b as Qe}from"./AccordionSummary-BcI2JKYB.js";import{D as We}from"./Delete-iHuC7UhI.js";import"./index-Cop6QSZX.js";const Le=we(r.jsx("path",{d:"m7 10 5 5 5-5z"})),Fe=we(r.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"})),$e=e=>{let n=0;for(let s=0;s<e.length;s++)n+=parseInt(e[s].marks);return n};function Me(e){var n,s,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(s=Me(e[n]))&&(o&&(o+=" "),o+=s);else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function Y(){for(var e,n,s=0,o="";s<arguments.length;)(e=arguments[s++])&&(n=Me(e))&&(o&&(o+=" "),o+=n);return o}let Ue={data:""},He=e=>{if(typeof window=="object"){let n=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return n.nonce=window.__nonce__,n.parentNode||(e||document.head).appendChild(n),n.firstChild}return e||Ue},Ve=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Xe=/\/\*[^]*?\*\/|  +/g,xe=/\n+/g,O=(e,n)=>{let s="",o="",a="";for(let t in e){let i=e[t];t[0]=="@"?t[1]=="i"?s=t+" "+i+";":o+=t[1]=="f"?O(i,t):t+"{"+O(i,t[1]=="k"?"":n)+"}":typeof i=="object"?o+=O(i,n?n.replace(/([^,])+/g,c=>t.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,c):c?c+" "+l:l)):t):i!=null&&(t=/^--/.test(t)?t:t.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=O.p?O.p(t,i):t+":"+i+";")}return s+(n&&a?n+"{"+a+"}":a)+o},S={},Te=e=>{if(typeof e=="object"){let n="";for(let s in e)n+=s+Te(e[s]);return n}return e},Be=(e,n,s,o,a)=>{let t=Te(e),i=S[t]||(S[t]=(l=>{let f=0,x=11;for(;f<l.length;)x=101*x+l.charCodeAt(f++)>>>0;return"go"+x})(t));if(!S[i]){let l=t!==e?e:(f=>{let x,m,b=[{}];for(;x=Ve.exec(f.replace(Xe,""));)x[4]?b.shift():x[3]?(m=x[3].replace(xe," ").trim(),b.unshift(b[0][m]=b[0][m]||{})):b[0][x[1]]=x[2].replace(xe," ").trim();return b[0]})(e);S[i]=O(a?{["@keyframes "+i]:l}:l,s?"":"."+i)}let c=s&&S.g?S.g:null;return s&&(S.g=S[i]),((l,f,x,m)=>{m?f.data=f.data.replace(m,l):f.data.indexOf(l)===-1&&(f.data=x?l+f.data:f.data+l)})(S[i],n,o,c),i},Je=(e,n,s)=>e.reduce((o,a,t)=>{let i=n[t];if(i&&i.call){let c=i(s),l=c&&c.props&&c.props.className||/^go/.test(c)&&c;i=l?"."+l:c&&typeof c=="object"?c.props?"":O(c,""):c===!1?"":c}return o+a+(i??"")},"");function ue(e){let n=this||{},s=e.call?e(n.p):e;return Be(s.unshift?s.raw?Je(s,[].slice.call(arguments,1),n.p):s.reduce((o,a)=>Object.assign(o,a&&a.call?a(n.p):a),{}):s,He(n.target),n.g,n.o,n.k)}ue.bind({g:1});ue.bind({k:1});function Ge(e,n){for(var s=0;s<n.length;s++){var o=n[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ke(e,n,s){return n&&Ge(e.prototype,n),e}function T(){return T=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},T.apply(this,arguments)}function Ye(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}function de(e,n){if(e==null)return{};var s={},o=Object.keys(e),a,t;for(t=0;t<o.length;t++)a=o[t],!(n.indexOf(a)>=0)&&(s[a]=e[a]);return s}var ve=function(){return""},Ze=P.createContext({enqueueSnackbar:ve,closeSnackbar:ve}),z={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},H="unmounted",D="exited",I="entering",L="entered",ge="exiting",fe=(function(e){Ye(n,e);function n(o){var a;a=e.call(this,o)||this;var t=o.appear,i;return a.appearStatus=null,o.in?t?(i=D,a.appearStatus=I):i=L:o.unmountOnExit||o.mountOnEnter?i=H:i=D,a.state={status:i},a.nextCallback=null,a}n.getDerivedStateFromProps=function(a,t){var i=a.in;return i&&t.status===H?{status:D}:null};var s=n.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(a){var t=null;if(a!==this.props){var i=this.state.status;this.props.in?i!==I&&i!==L&&(t=I):(i===I||i===L)&&(t=ge)}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var a=this.props.timeout,t=a,i=a;return a!=null&&typeof a!="number"&&typeof a!="string"&&(i=a.exit,t=a.enter),{exit:i,enter:t}},s.updateStatus=function(a,t){a===void 0&&(a=!1),t!==null?(this.cancelNextCallback(),t===I?this.performEnter(a):this.performExit()):this.props.unmountOnExit&&this.state.status===D&&this.setState({status:H})},s.performEnter=function(a){var t=this,i=this.props.enter,c=a,l=this.getTimeouts();if(!a&&!i){this.safeSetState({status:L},function(){t.props.onEntered&&t.props.onEntered(t.node,c)});return}this.props.onEnter&&this.props.onEnter(this.node,c),this.safeSetState({status:I},function(){t.props.onEntering&&t.props.onEntering(t.node,c),t.onTransitionEnd(l.enter,function(){t.safeSetState({status:L},function(){t.props.onEntered&&t.props.onEntered(t.node,c)})})})},s.performExit=function(){var a=this,t=this.props.exit,i=this.getTimeouts();if(!t){this.safeSetState({status:D},function(){a.props.onExited&&a.props.onExited(a.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:ge},function(){a.props.onExiting&&a.props.onExiting(a.node),a.onTransitionEnd(i.exit,function(){a.safeSetState({status:D},function(){a.props.onExited&&a.props.onExited(a.node)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(a,t){t=this.setNextCallback(t),this.setState(a,t)},s.setNextCallback=function(a){var t=this,i=!0;return this.nextCallback=function(){i&&(i=!1,t.nextCallback=null,a())},this.nextCallback.cancel=function(){i=!1},this.nextCallback},s.onTransitionEnd=function(a,t){this.setNextCallback(t);var i=a==null&&!this.props.addEndListener;if(!this.node||i){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),a!=null&&setTimeout(this.nextCallback,a)},s.render=function(){var a=this.state.status;if(a===H)return null;var t=this.props,i=t.children,c=de(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return i(a,c)},Ke(n,[{key:"node",get:function(){var a,t=(a=this.props.nodeRef)===null||a===void 0?void 0:a.current;if(!t)throw new Error("notistack - Custom snackbar is not refForwarding");return t}}]),n})(P.Component);function A(){}fe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:A,onEntering:A,onEntered:A,onExit:A,onExiting:A,onExited:A};function be(e,n){typeof e=="function"?e(n):e&&(e.current=n)}function oe(e,n){return d.useMemo(function(){return e==null&&n==null?null:function(s){be(e,s),be(n,s)}},[e,n])}function K(e){var n=e.timeout,s=e.style,o=s===void 0?{}:s,a=e.mode;return{duration:typeof n=="object"?n[a]||0:n,easing:o.transitionTimingFunction,delay:o.transitionDelay}}var le={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},_e=function(n){n.scrollTop=n.scrollTop},ye=function(n){return Math.round(n)+"ms"};function R(e,n){e===void 0&&(e=["all"]);var s=n||{},o=s.duration,a=o===void 0?300:o,t=s.easing,i=t===void 0?le.easeInOut:t,c=s.delay,l=c===void 0?0:c,f=Array.isArray(e)?e:[e];return f.map(function(x){var m=typeof a=="string"?a:ye(a),b=typeof l=="string"?l:ye(l);return x+" "+m+" "+i+" "+b}).join(",")}function et(e){return e&&e.ownerDocument||document}function ze(e){var n=et(e);return n.defaultView||window}function tt(e,n){n===void 0&&(n=166);var s;function o(){for(var a=this,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];var l=function(){e.apply(a,i)};clearTimeout(s),s=setTimeout(l,n)}return o.clear=function(){clearTimeout(s)},o}function nt(e,n){var s=n.getBoundingClientRect(),o=ze(n),a;if(n.fakeTransform)a=n.fakeTransform;else{var t=o.getComputedStyle(n);a=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("transform")}var i=0,c=0;if(a&&a!=="none"&&typeof a=="string"){var l=a.split("(")[1].split(")")[0].split(",");i=parseInt(l[4],10),c=parseInt(l[5],10)}switch(e){case"left":return"translateX("+(o.innerWidth+i-s.left)+"px)";case"right":return"translateX(-"+(s.left+s.width-i)+"px)";case"up":return"translateY("+(o.innerHeight+c-s.top)+"px)";default:return"translateY(-"+(s.top+s.height-c)+"px)"}}function V(e,n){if(n){var s=nt(e,n);s&&(n.style.webkitTransform=s,n.style.transform=s)}}var at=d.forwardRef(function(e,n){var s=e.children,o=e.direction,a=o===void 0?"down":o,t=e.in,i=e.style,c=e.timeout,l=c===void 0?0:c,f=e.onEnter,x=e.onEntered,m=e.onExit,b=e.onExited,C=de(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),v=d.useRef(null),p=oe(s.ref,v),g=oe(p,n),u=function(y,Q){V(a,y),_e(y),f&&f(y,Q)},h=function(y){var Q=i?.transitionTimingFunction||le.easeOut,W=K({timeout:l,mode:"enter",style:T({},i,{transitionTimingFunction:Q})});y.style.webkitTransition=R("-webkit-transform",W),y.style.transition=R("transform",W),y.style.webkitTransform="none",y.style.transform="none"},E=function(y){var Q=i?.transitionTimingFunction||le.sharp,W=K({timeout:l,mode:"exit",style:T({},i,{transitionTimingFunction:Q})});y.style.webkitTransition=R("-webkit-transform",W),y.style.transition=R("transform",W),V(a,y),m&&m(y)},j=function(y){y.style.webkitTransition="",y.style.transition="",b&&b(y)},_=d.useCallback(function(){v.current&&V(a,v.current)},[a]);return d.useEffect(function(){if(!(t||a==="down"||a==="right")){var k=tt(function(){v.current&&V(a,v.current)}),y=ze(v.current);return y.addEventListener("resize",k),function(){k.clear(),y.removeEventListener("resize",k)}}},[a,t]),d.useEffect(function(){t||_()},[t,_]),d.createElement(fe,Object.assign({appear:!0,nodeRef:v,onEnter:u,onEntered:x,onEntering:h,onExit:E,onExited:j,in:t,timeout:l},C),function(k,y){return d.cloneElement(s,T({ref:g,style:T({visibility:k==="exited"&&!t?"hidden":void 0},i,{},s.props.style)},y))})});at.displayName="Slide";function Z(e){return Object.entries(e).reduce(function(n,s){var o,a=s[0],t=s[1];return T({},n,(o={},o[a]=ue(t),o))},{})}var U={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(n){return"notistack-MuiContent-"+n}},Ee=Z({root:{height:0},entered:{height:"auto"}}),ee="0px",te=175,rt=d.forwardRef(function(e,n){var s=e.children,o=e.in,a=e.onExited,t=d.useRef(null),i=d.useRef(null),c=oe(n,i),l=function(){return t.current?t.current.clientHeight:0},f=function(p){p.style.height=ee},x=function(p){var g=l(),u=K({timeout:te,mode:"enter"}),h=u.duration,E=u.easing;p.style.transitionDuration=typeof h=="string"?h:h+"ms",p.style.height=g+"px",p.style.transitionTimingFunction=E||""},m=function(p){p.style.height="auto"},b=function(p){p.style.height=l()+"px"},C=function(p){_e(p);var g=K({timeout:te,mode:"exit"}),u=g.duration,h=g.easing;p.style.transitionDuration=typeof u=="string"?u:u+"ms",p.style.height=ee,p.style.transitionTimingFunction=h||""};return d.createElement(fe,{in:o,unmountOnExit:!0,onEnter:f,onEntered:m,onEntering:x,onExit:b,onExited:a,onExiting:C,nodeRef:i,timeout:te},function(v,p){return d.createElement("div",Object.assign({ref:c,className:Y(Ee.root,v==="entered"&&Ee.entered),style:T({pointerEvents:"all",overflow:"hidden",minHeight:ee,transition:R("height")},v==="entered"&&{overflow:"visible"},{},v==="exited"&&!o&&{visibility:"hidden"})},p),d.createElement("div",{ref:t,className:U.CollapseWrapper,style:{display:"flex",width:"100%"}},s))})});rt.displayName="Collapse";var it=typeof window<"u"?d.useLayoutEffect:d.useEffect;function je(e){var n=d.useRef(e);return it(function(){n.current=e}),d.useCallback(function(){return n.current.apply(void 0,arguments)},[])}var st=d.forwardRef(function(e,n){var s=e.children,o=e.className,a=e.autoHideDuration,t=e.disableWindowBlurListener,i=t===void 0?!1:t,c=e.onClose,l=e.id,f=e.open,x=e.SnackbarProps,m=x===void 0?{}:x,b=d.useRef(),C=je(function(){c&&c.apply(void 0,arguments)}),v=je(function(E){!c||E==null||(b.current&&clearTimeout(b.current),b.current=setTimeout(function(){C(null,"timeout",l)},E))});d.useEffect(function(){return f&&v(a),function(){b.current&&clearTimeout(b.current)}},[f,a,v]);var p=function(){b.current&&clearTimeout(b.current)},g=d.useCallback(function(){a!=null&&v(a*.5)},[a,v]),u=function(j){m.onMouseEnter&&m.onMouseEnter(j),p()},h=function(j){m.onMouseLeave&&m.onMouseLeave(j),g()};return d.useEffect(function(){if(!i&&f)return window.addEventListener("focus",g),window.addEventListener("blur",p),function(){window.removeEventListener("focus",g),window.removeEventListener("blur",p)}},[i,g,f]),d.createElement("div",Object.assign({ref:n},m,{className:Y(U.Snackbar,o),onMouseEnter:u,onMouseLeave:h}),s)});st.displayName="Snackbar";var ne,ot=Z({root:(ne={display:"flex",flexWrap:"wrap",flexGrow:1},ne[z.upSm]={flexGrow:"initial",minWidth:"288px"},ne)}),Oe=d.forwardRef(function(e,n){var s=e.className,o=de(e,["className"]);return P.createElement("div",Object.assign({ref:n,className:Y(ot.root,s)},o))});Oe.displayName="SnackbarContent";var F=Z({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),Ce="notistack-snackbar",lt=d.forwardRef(function(e,n){var s=e.id,o=e.message,a=e.action,t=e.iconVariant,i=e.variant,c=e.hideIconVariant,l=e.style,f=e.className,x=t[i],m=a;return typeof m=="function"&&(m=m(s)),P.createElement(Oe,{ref:n,role:"alert","aria-describedby":Ce,style:l,className:Y(U.MuiContent,U.MuiContentVariant(i),F.root,F[i],f,!c&&x&&F.lessPadding)},P.createElement("div",{id:Ce,className:F.message},c?null:x,o),m&&P.createElement("div",{className:F.action},m))});lt.displayName="MaterialDesignContent";var $,ae,X,B,re,N={view:{default:20},snackbar:{default:6,dense:2}},ke="."+U.CollapseWrapper,ie=16;$={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:R(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},$[ke]={padding:N.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},$.maxWidth="calc(100% - "+N.view.default*2+"px)",$[z.downXs]={width:"100%",maxWidth:"calc(100% - "+ie*2+"px)"},ae={},ae[ke]={padding:N.snackbar.dense+"px 0px"},N.view.default-N.snackbar.default+"",N.view.default-N.snackbar.default+"",X={left:N.view.default+"px"},X[z.upSm]={alignItems:"flex-start"},X[z.downXs]={left:ie+"px"},B={right:N.view.default+"px"},B[z.upSm]={alignItems:"flex-end"},B[z.downXs]={right:ie+"px"},re={left:"50%",transform:"translateX(-50%)"},re[z.upSm]={alignItems:"center"};var me=(function(){return d.useContext(Ze)});function ct({quizId:e,maxMarks:n,onRefresh:s}){const{enqueueSnackbar:o}=me(),a={quizId:e,question:"",image:"",marks:"",category:"",answer:"",negative:"",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]},[t,i]=d.useState(a),[c,l]=d.useState(""),[f,x]=d.useState(!1),m=g=>{const{name:u,value:h,type:E,files:j}=g.target;if(E==="file"&&j&&j.length>0){const _=j[0];i(k=>({...k,[u]:_})),l(URL.createObjectURL(_))}else i(_=>({..._,[u]:h}))},b=(g,u)=>{const h=[...t.options];h[g].text=u,i({...t,options:h})},C=(g,u)=>{const h=[...t.options];u==="MCQ"?h.forEach((E,j)=>E.isCorrect=j===g):h[g].isCorrect=!h[g].isCorrect,i({...t,options:h})},v=()=>{i(g=>({...g,image:""})),l("")},p=async g=>{if(g.preventDefault(),console.log(t),!t.question||!t.category||parseFloat(t.marks)>n){o("Please fill all required fields correctly!",{variant:"warning"});return}x(!0);const u=new FormData;t.image instanceof File&&u.append("image",t.image),u.append("data",JSON.stringify({quizId:t.quizId,question:t.question,marks:parseFloat(t.marks)||0,category:t.category,answer:t.answer,options:t.options,negative:parseFloat(t.negative)||0}));try{console.log("data"),await J.post(`${G}/api/admin/quiz/add/question`,u,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),o("Question added successfully!",{variant:"success"}),s(),i(a),l("")}catch(h){console.error(h),o("Failed to add question. Try again!",{variant:"error"})}finally{x(!1)}};return r.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},onSubmit:p,className:"space-y-4 bg-white p-5",children:[r.jsx(w,{minRows:2,size:"small",fullWidth:!0,name:"question",label:"Question",multiline:!0,value:t.question,onChange:m,required:!0}),r.jsx(w,{size:"small",fullWidth:!0,name:"marks",type:"number",label:"Marks",value:t.marks,onChange:m,inputProps:{min:0,step:"any"},required:!0}),r.jsx(w,{size:"small",fullWidth:!0,name:"negative",type:"number",label:"Negative Marks",value:t.negative,onChange:m,inputProps:{min:0,step:"any"}}),r.jsxs(w,{size:"small",select:!0,fullWidth:!0,name:"category",label:"Category",value:t.category,onChange:m,required:!0,children:[r.jsx(M,{value:"MCQ",children:"MCQ"}),r.jsx(M,{value:"MSQ",children:"MSQ"}),r.jsx(M,{value:"Text",children:"Text"})]}),t.category==="Text"&&r.jsx(w,{size:"small",fullWidth:!0,name:"answer",label:"Answer",value:t.answer,onChange:m,required:!0}),(t.category==="MCQ"||t.category==="MSQ")&&r.jsx("div",{className:"grid grid-cols-1 gap-2",children:t.options.map((g,u)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(w,{size:"small",className:"flex-1",label:`Option ${u+1}`,value:g.text,onChange:h=>b(u,h.target.value),required:!0}),t.category==="MCQ"?r.jsx("input",{type:"radio",name:"correctOption",checked:g.isCorrect,onChange:()=>C(u,"MCQ")}):r.jsx("input",{type:"checkbox",checked:g.isCorrect,onChange:()=>C(u,"MSQ")}),"Correct"]},u))}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(q,{component:"label",variant:"outlined",startIcon:r.jsx(se,{}),children:["Upload Image",r.jsx("input",{type:"file",name:"image",hidden:!0,onChange:m})]}),c&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("img",{src:c,alt:"Preview",className:"h-20 object-contain cursor-pointer",onClick:()=>document.getElementById("image-full")?.requestFullscreen()}),r.jsx(Se,{size:"small",onClick:v,children:r.jsx(Ae,{})})]}),r.jsx("img",{src:c,id:"image-full",className:"hidden",alt:"fullscreen"})]}),r.jsx(q,{type:"submit",variant:"contained",disabled:f,children:f?r.jsx(Ne,{size:20}):"Add Question"})]})}const ut=d.lazy(()=>ce(()=>import("./AddQuestionAiken-Dm9ZptfW.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),dt=d.lazy(()=>ce(()=>import("./AddQuestionJson-D9QWmGw4.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),ft=d.lazy(()=>ce(()=>import("./AddQuestionExcel-BC55sJFK.js"),__vite__mapDeps([8,1,2,3,4,9,5,6]))),Ct=()=>{const[e,n]=d.useState(!0),[s,o]=d.useState(!1),[a,t]=d.useState(!1),[i,c]=d.useState(null),{slug:l}=Ie(),[f,x]=d.useState(0),[m,b]=d.useState(0),[C,v]=d.useState(!1),{enqueueSnackbar:p}=me();d.useEffect(()=>{l&&(async()=>{try{const h=await J.get(`${G}/api/admin/quiz/${l}`,{withCredentials:!0});h.data&&c(h.data)}catch(h){console.error(h),p("Failed to load quiz",{variant:"error"})}})()},[l,C,p]),d.useEffect(()=>{i&&(b(i.marks),x($e(i.questions||[])))},[i]);const g=async u=>{try{await J.delete(`${G}/api/admin/quiz/question/del/${i?._id}/${u}`,{withCredentials:!0}),p("Question deleted successfully!",{variant:"success"}),v(h=>!h)}catch(h){console.error(h),p("Failed to delete question",{variant:"error"})}};return i?r.jsxs("section",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center bg-white rounded-md shadow-sm p-6 gap-4",children:[r.jsxs("div",{className:"flex flex-col text-sm",children:[r.jsxs("span",{className:"text-gray-600",children:[r.jsx("strong",{children:"Status:"})," ",i.isAvailable?"Available":"Not Available"]}),r.jsxs("span",{className:"text-gray-600",children:[r.jsx("strong",{children:"Current Marks:"})," ",f," / ",m]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx(q,{onClick:()=>n(!1),variant:"outlined",startIcon:r.jsx(Fe,{}),children:"Upload Excel"}),r.jsx(q,{onClick:()=>o(!0),variant:"contained",startIcon:r.jsx(se,{}),children:"Upload JSON"}),r.jsx(q,{onClick:()=>t(!0),variant:"contained",startIcon:r.jsx(se,{}),children:"Upload AIKEN"})]})]}),r.jsx(mt,{data:i,onRefresh:()=>v(u=>!u)}),r.jsx(ct,{quizId:l,maxMarks:m,currentMarks:f,setCurrentMarks:x,onRefresh:()=>v(u=>!u)}),r.jsxs("section",{className:"bg-white p-6 rounded-md shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Questions"}),i.questions.length>0?i.questions.map((u,h)=>r.jsxs(Pe,{className:"mb-3 rounded-md border",children:[r.jsx(qe,{expandIcon:r.jsx(Le,{}),sx:{flexDirection:"row-reverse",alignItems:"center"},children:r.jsxs("div",{className:"flex w-full justify-between items-center",children:[r.jsxs("h3",{className:"text-sm font-medium",children:["Question ",h+1,":"," ",r.jsx("span",{className:"ml-2 font-normal",children:u.question})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Se,{onClick:()=>g(u._id),size:"small",children:r.jsx(We,{sx:{color:"gray"}})}),r.jsxs("span",{className:"text-xs text-gray-600",children:[u.marks," Marks"]})]})]})}),r.jsx(Qe,{children:r.jsxs("div",{className:"px-4 text-sm flex flex-col gap-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Type:"})," ",u.category]}),u.image&&r.jsx("img",{src:u.image,alt:"Question",className:"my-2 h-24 w-auto object-contain rounded-md border"}),u.category==="Text"&&r.jsx(w,{label:"Answer",value:u.answer,variant:"standard",disabled:!0,fullWidth:!0}),(u.category==="MCQ"||u.category==="MSQ")&&u.options?.map((E,j)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{children:["Option ",j+1,": ",E.text]}),r.jsx("input",{type:"radio",checked:E.isCorrect,readOnly:!0}),r.jsx("span",{className:"text-xs text-green-600",children:E.isCorrect?"Correct":""})]},j))]})})]},u._id)):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No Questions to display"})]}),!e&&r.jsx(d.Suspense,{fallback:r.jsx("div",{className:"loader"}),children:r.jsx(ft,{id:l,setModalClose:n,onSuccess:()=>{p("Excel uploaded successfully!",{variant:"success"}),v(u=>!u)},onError:()=>p("Upload failed",{variant:"error"})})}),s&&r.jsx(dt,{id:l,setModalClose:()=>o(!1),onSuccess:()=>{p("JSON uploaded successfully!",{variant:"success"}),v(u=>!u)},onError:()=>p("JSON upload failed",{variant:"error"})}),a&&r.jsx(ut,{id:l,setModalClose:()=>t(!1),onSuccess:()=>{p("AIKEN uploaded successfully!",{variant:"success"}),v(u=>!u)},onError:()=>p("AIKEN upload failed",{variant:"error"})})]}):r.jsx("div",{className:"h-screen w-screen fixed flex justify-center items-center z-[2999]",children:r.jsx(Ne,{size:"27px"})})},mt=({data:e,onRefresh:n})=>{const s=De(l=>l.auth.user?.user._id),{enqueueSnackbar:o}=me(),[a,t]=d.useState({title:e.title,creator:s,duration:e.duration,marks:e.marks,category:e.category,difficulty:e.difficulty,isAvailable:e.isAvailable}),i=l=>{const{name:f,value:x,type:m,checked:b}=l.target;t(C=>({...C,[f]:m==="checkbox"?b:["marks","duration"].includes(f)?parseInt(x):x}))},c=async l=>{l.preventDefault();try{await J.post(`${G}/api/admin/quiz/edit/${e._id}`,a,{withCredentials:!0}),o("Quiz updated successfully!",{variant:"success"}),n()}catch(f){o("Failed to update quiz",{variant:"error"}),console.error(f)}};return r.jsxs("section",{className:"p-6 bg-white rounded-md shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Edit Quiz Details"}),r.jsxs("form",{onSubmit:c,className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Creator"}),r.jsx(w,{size:"small",type:"text",fullWidth:!0,value:s})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Title"}),r.jsx(w,{size:"small",type:"text",name:"title",fullWidth:!0,value:a.title,onChange:i})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Marks"}),r.jsx(w,{size:"small",type:"number",name:"marks",value:a.marks,onChange:i,fullWidth:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Duration (min)"}),r.jsx(w,{size:"small",type:"number",name:"duration",value:a.duration,onChange:i,fullWidth:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Category"}),r.jsx(pe,{fullWidth:!0,children:r.jsxs(he,{size:"small",name:"category",value:a.category,onChange:i,children:[r.jsx(M,{value:"Aptitude",children:"Aptitude"}),r.jsx(M,{value:"Core",children:"Core"}),r.jsx(M,{value:"Miscellaneous",children:"Miscellaneous"})]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Difficulty"}),r.jsx(pe,{fullWidth:!0,children:r.jsxs(he,{size:"small",name:"difficulty",value:a.difficulty,onChange:i,children:[r.jsx(M,{value:"Easy",children:"Easy"}),r.jsx(M,{value:"Medium",children:"Medium"}),r.jsx(M,{value:"Hard",children:"Hard"})]})})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("label",{className:"text-sm font-semibold",children:"Available"}),r.jsx(Re,{checked:a.isAvailable,onChange:i,name:"isAvailable"})]}),r.jsx("div",{className:"col-span-full",children:r.jsx(q,{type:"submit",variant:"contained",color:"primary",children:"Update Quiz"})})]})]})};export{mt as QuizEdit,Ct as default};
