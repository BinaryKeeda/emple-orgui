import{a as z,g as D,r as n,u as H,aQ as P,j as o,s as M,c as w,e as _,aR as q,i as J,a0 as U,m as K,aS as V,M as X,S as k,z as E,aT as Z,aU as tt,R as et,C as st,x as F,B as T}from"./index-BgNwGUBa.js";function ot(e){return z("MuiListItem",e)}D("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function nt(e){return z("MuiListItemSecondaryAction",e)}D("MuiListItemSecondaryAction",["root","disableGutters"]);const at=e=>{const{disableGutters:t,classes:s}=e;return _({root:["root",t&&"disableGutters"]},nt,s)},rt=M("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),Y=n.forwardRef(function(t,s){const a=H({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...l}=a,c=n.useContext(P),r={...a,disableGutters:c.disableGutters},p=at(r);return o.jsx(rt,{className:w(p.root,i),ownerState:r,ref:s,...l})});Y.muiName="ListItemSecondaryAction";const it=(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,s.alignItems==="flex-start"&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters,!s.disablePadding&&t.padding,s.hasSecondaryAction&&t.secondaryAction]},dt=e=>{const{alignItems:t,classes:s,dense:a,disableGutters:i,disablePadding:l,divider:c,hasSecondaryAction:r}=e;return _({root:["root",a&&"dense",!i&&"gutters",!l&&"padding",c&&"divider",t==="flex-start"&&"alignItemsFlexStart",r&&"secondaryAction"],container:["container"]},ot,s)},lt=M("div",{name:"MuiListItem",slot:"Root",overridesResolver:it})(K(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${V.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),ct=M("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),pt=n.forwardRef(function(t,s){const a=H({props:t,name:"MuiListItem"}),{alignItems:i="center",children:l,className:c,component:r,components:p={},componentsProps:C={},ContainerComponent:x="li",ContainerProps:{className:L,...h}={},dense:S=!1,disableGutters:m=!1,disablePadding:d=!1,divider:u=!1,secondaryAction:y,slotProps:R={},slots:O={},...Q}=a,G=n.useContext(P),j=n.useMemo(()=>({dense:S||G.dense||!1,alignItems:i,disableGutters:m}),[i,G.dense,S,m]),W=n.useRef(null),g=n.Children.toArray(l),N=g.length&&q(g[g.length-1],["ListItemSecondaryAction"]),I={...a,alignItems:i,dense:j.dense,disableGutters:m,disablePadding:d,divider:u,hasSecondaryAction:N},B=dt(I),$=J(W,s),A=O.root||p.Root||lt,b=R.root||C.root||{},v={className:w(B.root,b.className,c),...Q};let f=r||"li";return N?(f=!v.component&&!r?"div":f,x==="li"&&(f==="li"?f="div":v.component==="li"&&(v.component="div")),o.jsx(P.Provider,{value:j,children:o.jsxs(ct,{as:x,className:w(B.container,L),ref:$,ownerState:I,...h,children:[o.jsx(A,{...b,...!U(A)&&{as:f,ownerState:{...I,...b.ownerState}},...v,children:g}),g.pop()]})})):o.jsx(P.Provider,{value:j,children:o.jsxs(A,{...b,as:f,ref:$,...!U(A)&&{ownerState:{...I,...b.ownerState}},...v,children:[g,y&&o.jsx(Y,{children:y})]})})}),mt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:800,maxHeight:"80vh",bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:4,overflowY:"auto"};function gt({open:e,onClose:t,onSuccess:s,testId:a,sectionId:i}){const[l,c]=n.useState([]),[r,p]=n.useState(1),[C,x]=n.useState(!1),[L,h]=n.useState(!0);n.useEffect(()=>{e&&(async()=>{x(!0);try{const y=(await F.get(`${T}/api/admin/problems?search=&category=&difficulty=&isAvailable=&page=${r}&limit=10&sortBy=createdAt&sortOrder=desc`,{withCredentials:!0})).data.data||[];c(R=>[...R,...y]),h(y.length>0)}catch(u){console.error("Error fetching problems:",u),h(!1)}finally{x(!1)}})()},[r,e]);const S=async d=>{try{await F.post(`${T}/api/admin/tests/${a}/sections/${i}/problem`,{problemId:d},{withCredentials:!0}),alert("Problem added successfully!"),s(),m()}catch(u){console.error("Failed to add problem:",u),alert("Failed to add problem")}},m=()=>{c([]),p(1),h(!0),t()};return o.jsx(X,{open:e,onClose:m,children:o.jsxs(k,{sx:mt,children:[o.jsx(E,{variant:"h6",mb:2,children:"Select Problem to Add"}),o.jsx(Z,{children:l.map(d=>o.jsx(pt,{divider:!0,secondaryAction:o.jsx(et,{size:"small",variant:"contained",onClick:()=>S(d._id),children:"Add"}),children:o.jsx(tt,{primary:d.title,secondary:`Difficulty: ${d.difficulty}`})},d._id))}),C&&o.jsx(k,{className:"flex justify-center mt-4",children:o.jsx(st,{size:24})}),!C&&!L&&l.length===0&&o.jsx(E,{className:"text-center mt-4",color:"textSecondary",children:"No problems found."})]})})}export{gt as default};
