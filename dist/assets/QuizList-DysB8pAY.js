import{$ as y,r as o,j as e,x as d,I as u,a0 as p,t as z,B as C}from"./index-Dm6XyL4l.js";import{u as v}from"./useQuery-BbZ0NZ13.js";import{P as E}from"./Modal-CBLXFOlt.js";import{T as I}from"./TextField-BFRpBTkm.js";import{I as Q,S as R,T as A,a as $,b as B,c,d as t,e as L}from"./Search-DxMsmx6_.js";import{V as _,E as k}from"./Visibility-DwHhsB8l.js";import{T as D}from"./TablePagination-BaxKHgFn.js";import"./Typography-DlwFXgy0.js";import"./MenuItem-WvtNfqpr.js";import"./dividerClasses-DHm6-sj7.js";const O=async({sectionId:r,page:a,limit:n,search:i})=>(await z.get(`${C}/api/campus/quiz/get/section/${r}`,{params:{page:a,limit:n,search:i},withCredentials:!0})).data,X=()=>{const{id:r}=y(),[a,n]=o.useState(0),[i,h]=o.useState(10),[l,g]=o.useState(""),[x,f]=o.useState(l);o.useEffect(()=>{const s=setTimeout(()=>{f(l),n(0)},400);return()=>clearTimeout(s)},[l]);const{data:m,isLoading:P}=v({queryKey:["quizzes",r,a,i,x],queryFn:()=>O({sectionId:r,page:a+1,limit:i,search:x}),enabled:!!r,staleTime:1e3*60*5}),j=m?.quizzes??[],S=m?.totalQuizzes??0,T=(s,w)=>n(w),b=s=>{h(parseInt(s.target.value,10)),n(0)};return e.jsxs(E,{sx:{p:3,borderRadius:3,overflow:"hidden"},children:[e.jsx(I,{size:"small",placeholder:"Search quizzes...",value:l,onChange:s=>g(s.target.value),sx:{mb:2,width:"100%",maxWidth:400},InputProps:{startAdornment:e.jsx(Q,{position:"start",children:e.jsx(R,{})})}}),e.jsx(A,{children:e.jsxs($,{children:[e.jsx(B,{children:e.jsxs(c,{children:[e.jsx(t,{children:"Title"}),e.jsx(t,{children:"Category"}),e.jsx(t,{children:"Difficulty"}),e.jsx(t,{children:"Duration"}),e.jsx(t,{children:"Marks"}),e.jsx(t,{children:"Created By"}),e.jsx(t,{children:"Cost"}),e.jsx(t,{align:"center",children:"Actions"})]})}),e.jsx(L,{children:P?e.jsx(c,{children:e.jsx(t,{colSpan:8,align:"center",children:"Loading..."})}):j.length===0?e.jsx(c,{children:e.jsx(t,{colSpan:8,align:"center",children:"No quizzes found."})}):j.map(s=>e.jsxs(c,{hover:!0,children:[e.jsx(t,{children:s.title}),e.jsx(t,{children:s.category}),e.jsx(t,{children:s.difficulty}),e.jsxs(t,{children:[s.duration," min"]}),e.jsx(t,{children:s.marks}),e.jsx(t,{children:s.creator.name||"-"}),e.jsx(t,{children:e.jsx(d,{title:`Total: ${s.costPerAttempt*s.noOfSubmissions}`,arrow:!0,children:e.jsx("span",{className:"cursor-pointer",children:(s.costPerAttempt||0)*(s.noOfSubmissions||0)})})}),e.jsxs(t,{align:"center",children:[e.jsx(d,{title:"Preview Quiz",children:e.jsx(u,{component:p,to:`preview/${s.slug}`,color:"primary",size:"small",children:e.jsx(_,{fontSize:"small"})})}),e.jsx(d,{title:"Edit Quiz",children:e.jsx(u,{component:p,to:`edit/${s._id}`,color:"warning",size:"small",children:e.jsx(k,{fontSize:"small"})})})]})]},s._id))})]})}),e.jsx(D,{component:"div",count:S,page:a,onPageChange:T,rowsPerPage:i,onRowsPerPageChange:b,rowsPerPageOptions:[5,10,20,50]})]})};export{X as default};
