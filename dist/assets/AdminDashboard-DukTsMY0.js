import{r as f,g as dt,a as pt,u as et,b as F,c as W,s as E,j as r,d as v,e as rt,m as U,f as vt,h as gt,T as bt,i as yt,k as wt,l as it,n as jt,o as Rt,p as Pt,q as Ct,t as ot,B as nt,C as Ot,v as Dt,w as kt,x as Tt,L as St,y as st,I as lt,z as Nt,A as $t,D as At}from"./index-DIURjhAd.js";import{u as Bt}from"./useQuery-DKyb2Rjj.js";import{o as ht,d as Et,m as It,M as Lt,P as zt}from"./Modal-aMNQSBK5.js";import{g as Ft}from"./dividerClasses-CkepYj8H.js";import{T as M}from"./Typography-BrV-ZvW1.js";import{D as Mt,a as _t,b as Vt,c as Wt,d as Ut}from"./DialogTitle-DsJKiJmL.js";import{B as J}from"./Button-BXEi_mMv.js";import{S as Z,A as Ht}from"./ArrowRight-D6Vu6zXp.js";const ut=e=>{const t=f.useRef({});return f.useEffect(()=>{t.current=e}),t.current};function Xt(e){const{badgeContent:t,invisible:o=!1,max:n=99,showZero:i=!1}=e,d=ut({badgeContent:t,max:n});let c=o;o===!1&&t===0&&!i&&(c=!0);const{badgeContent:l,max:a=n}=c?d:e,p=l&&Number(l)>a?`${a}+`:l;return{badgeContent:l,invisible:c,max:a,displayValue:p}}function Yt(e){return pt("MuiBadge",e)}const A=dt("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),K=10,Q=4,qt=e=>{const{color:t,anchorOrigin:o,invisible:n,overlap:i,variant:d,classes:c={}}=e,l={root:["root"],badge:["badge",d,n&&"invisible",`anchorOrigin${v(o.vertical)}${v(o.horizontal)}`,`anchorOrigin${v(o.vertical)}${v(o.horizontal)}${v(i)}`,`overlap${v(i)}`,t!=="default"&&`color${v(t)}`]};return rt(l,Yt,c)},Gt=E("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Zt=E("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.badge,t[o.variant],t[`anchorOrigin${v(o.anchorOrigin.vertical)}${v(o.anchorOrigin.horizontal)}${v(o.overlap)}`],o.color!=="default"&&t[`color${v(o.color)}`],o.invisible&&t.invisible]}})(U(({theme:e})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:K*2,lineHeight:1,padding:"0 6px",height:K*2,borderRadius:K,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.entries(e.palette).filter(vt(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}})),{props:{variant:"dot"},style:{borderRadius:Q,height:Q*2,minWidth:Q*2,padding:0}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${A.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${A.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${A.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${A.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${A.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${A.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${A.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${A.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]})));function ct(e){return{vertical:e?.vertical??"top",horizontal:e?.horizontal??"right"}}const Kt=f.forwardRef(function(t,o){const n=et({props:t,name:"MuiBadge"}),{anchorOrigin:i,className:d,classes:c,component:l,components:a={},componentsProps:p={},children:g,overlap:m="rectangular",color:x="default",invisible:P=!1,max:h=99,badgeContent:y,slots:w,slotProps:S,showZero:I=!1,variant:O="standard",...N}=n,{badgeContent:C,invisible:_,max:b,displayValue:B}=Xt({max:h,invisible:P,badgeContent:y,showZero:I}),j=ut({anchorOrigin:ct(i),color:x,overlap:m,variant:O,badgeContent:y}),L=_||C==null&&O!=="dot",{color:H=x,overlap:D=m,anchorOrigin:k,variant:R=O}=L?j:n,V=ct(k),z=R!=="dot"?B:void 0,$={...n,badgeContent:C,invisible:L,max:b,displayValue:z,showZero:I,anchorOrigin:V,color:H,overlap:D,variant:R},s=qt($),u={slots:{root:w?.root??a.Root,badge:w?.badge??a.Badge},slotProps:{root:S?.root??p.root,badge:S?.badge??p.badge}},[T,q]=F("root",{elementType:Gt,externalForwardedProps:{...u,...N},ownerState:$,className:W(s.root,d),ref:o,additionalProps:{as:l}}),[G,X]=F("badge",{elementType:Zt,externalForwardedProps:u,ownerState:$,className:s.badge});return r.jsxs(T,{...q,children:[g,r.jsx(G,{...X,children:z})]})}),Qt=e=>{const{absolute:t,children:o,classes:n,flexItem:i,light:d,orientation:c,textAlign:l,variant:a}=e;return rt({root:["root",t&&"absolute",a,d&&"light",c==="vertical"&&"vertical",i&&"flexItem",o&&"withChildren",o&&c==="vertical"&&"withChildrenVertical",l==="right"&&c!=="vertical"&&"textAlignRight",l==="left"&&c!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",c==="vertical"&&"wrapperVertical"]},Ft,n)},Jt=E("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.absolute&&t.absolute,t[o.variant],o.light&&t.light,o.orientation==="vertical"&&t.vertical,o.flexItem&&t.flexItem,o.children&&t.withChildren,o.children&&o.orientation==="vertical"&&t.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&t.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&t.textAlignLeft]}})(U(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),te=E("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.wrapper,o.orientation==="vertical"&&t.wrapperVertical]}})(U(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),tt=f.forwardRef(function(t,o){const n=et({props:t,name:"MuiDivider"}),{absolute:i=!1,children:d,className:c,orientation:l="horizontal",component:a=d||l==="vertical"?"div":"hr",flexItem:p=!1,light:g=!1,role:m=a!=="hr"?"separator":void 0,textAlign:x="center",variant:P="fullWidth",...h}=n,y={...n,absolute:i,component:a,flexItem:p,light:g,orientation:l,role:m,textAlign:x,variant:P},w=Qt(y);return r.jsx(Jt,{as:a,className:W(w.root,c),role:m,ref:o,ownerState:y,"aria-orientation":m==="separator"&&(a!=="hr"||l==="vertical")?l:void 0,...h,children:d?r.jsx(te,{className:w.wrapper,ownerState:y,children:d}):null})});tt&&(tt.muiSkipListHighlight=!0);function ee(e,t,o){const n=t.getBoundingClientRect(),i=o&&o.getBoundingClientRect(),d=ht(t);let c;if(t.fakeTransform)c=t.fakeTransform;else{const p=d.getComputedStyle(t);c=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}let l=0,a=0;if(c&&c!=="none"&&typeof c=="string"){const p=c.split("(")[1].split(")")[0].split(",");l=parseInt(p[4],10),a=parseInt(p[5],10)}return e==="left"?i?`translateX(${i.right+l-n.left}px)`:`translateX(${d.innerWidth+l-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-l}px)`:`translateX(-${n.left+n.width-l}px)`:e==="up"?i?`translateY(${i.bottom+a-n.top}px)`:`translateY(${d.innerHeight+a-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-a}px)`:`translateY(-${n.top+n.height-a}px)`}function re(e){return typeof e=="function"?e():e}function Y(e,t,o){const n=re(o),i=ee(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const oe=f.forwardRef(function(t,o){const n=gt(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},d={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:c,appear:l=!0,children:a,container:p,direction:g="down",easing:m=i,in:x,onEnter:P,onEntered:h,onEntering:y,onExit:w,onExited:S,onExiting:I,style:O,timeout:N=d,TransitionComponent:C=bt,..._}=t,b=f.useRef(null),B=yt(wt(a),b,o),j=s=>u=>{s&&(u===void 0?s(b.current):s(b.current,u))},L=j((s,u)=>{Y(g,s,p),jt(s),P&&P(s,u)}),H=j((s,u)=>{const T=it({timeout:N,style:O,easing:m},{mode:"enter"});s.style.webkitTransition=n.transitions.create("-webkit-transform",{...T}),s.style.transition=n.transitions.create("transform",{...T}),s.style.webkitTransform="none",s.style.transform="none",y&&y(s,u)}),D=j(h),k=j(I),R=j(s=>{const u=it({timeout:N,style:O,easing:m},{mode:"exit"});s.style.webkitTransition=n.transitions.create("-webkit-transform",u),s.style.transition=n.transitions.create("transform",u),Y(g,s,p),w&&w(s)}),V=j(s=>{s.style.webkitTransition="",s.style.transition="",S&&S(s)}),z=s=>{c&&c(b.current,s)},$=f.useCallback(()=>{b.current&&Y(g,b.current,p)},[g,p]);return f.useEffect(()=>{if(x||g==="down"||g==="right")return;const s=Et(()=>{b.current&&Y(g,b.current,p)}),u=ht(b.current);return u.addEventListener("resize",s),()=>{s.clear(),u.removeEventListener("resize",s)}},[g,x,p]),f.useEffect(()=>{x||$()},[x,$]),r.jsx(C,{nodeRef:b,onEnter:L,onEntered:D,onEntering:H,onExit:R,onExited:V,onExiting:k,addEndListener:z,appear:l,in:x,timeout:N,..._,children:(s,{ownerState:u,...T})=>f.cloneElement(a,{ref:B,style:{visibility:s==="exited"&&!x?"hidden":void 0,...O,...a.props.style},...T})})});function ne(e){return pt("MuiDrawer",e)}dt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const ft=(e,t)=>{const{ownerState:o}=e;return[t.root,(o.variant==="permanent"||o.variant==="persistent")&&t.docked,t.modal]},ae=e=>{const{classes:t,anchor:o,variant:n}=e,i={root:["root",`anchor${v(o)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${v(o)}`,n!=="temporary"&&`paperAnchorDocked${v(o)}`]};return rt(i,ne,t)},ie=E(Lt,{name:"MuiDrawer",slot:"Root",overridesResolver:ft})(U(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),se=E("div",{shouldForwardProp:Pt,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:ft})({flex:"0 0 auto"}),le=E(zt,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`paperAnchor${v(o.anchor)}`],o.variant!=="temporary"&&t[`paperAnchorDocked${v(o.anchor)}`]]}})(U(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),mt={left:"right",right:"left",top:"down",bottom:"up"};function ce(e){return["left","right"].includes(e)}function de({direction:e},t){return e==="rtl"&&ce(t)?mt[t]:t}const pe=f.forwardRef(function(t,o){const n=et({props:t,name:"MuiDrawer"}),i=gt(),d=Rt(),c={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:a,children:p,className:g,elevation:m=16,hideBackdrop:x=!1,ModalProps:{BackdropProps:P,...h}={},onClose:y,open:w=!1,PaperProps:S={},SlideProps:I,TransitionComponent:O,transitionDuration:N=c,variant:C="temporary",slots:_={},slotProps:b={},...B}=n,j=f.useRef(!1);f.useEffect(()=>{j.current=!0},[]);const L=de({direction:d?"rtl":"ltr"},l),D={...n,anchor:l,elevation:m,open:w,variant:C,...B},k=ae(D),R={slots:{transition:O,..._},slotProps:{paper:S,transition:I,...b,backdrop:It(b.backdrop||{...a,...P},{transitionDuration:N})}},[V,z]=F("root",{ref:o,elementType:ie,className:W(k.root,k.modal,g),shouldForwardComponentProp:!0,ownerState:D,externalForwardedProps:{...R,...B,...h},additionalProps:{open:w,onClose:y,hideBackdrop:x,slots:{backdrop:R.slots.backdrop},slotProps:{backdrop:R.slotProps.backdrop}}}),[$,s]=F("paper",{elementType:le,shouldForwardComponentProp:!0,className:W(k.paper,S.className),ownerState:D,externalForwardedProps:R,additionalProps:{elevation:C==="temporary"?m:0,square:!0,...C==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[u,T]=F("docked",{elementType:se,ref:o,className:W(k.root,k.docked,g),ownerState:D,externalForwardedProps:R,additionalProps:B}),[q,G]=F("transition",{elementType:oe,ownerState:D,externalForwardedProps:R,additionalProps:{in:w,direction:mt[L],timeout:N,appear:j.current}}),X=r.jsx($,{...s,children:p});if(C==="permanent")return r.jsx(u,{...T,children:X});const at=r.jsx(q,{...G,children:X});return C==="persistent"?r.jsx(u,{...T,children:at}):r.jsx(V,{...z,children:at})}),ge=Ct(r.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),he={GET_USER_INVITE:"/api/data/user/invites/"},ue=ot.create({baseURL:nt,withCredentials:!0,headers:{"Content-Type":"application/json"}}),fe=async e=>(await ue.get(he.GET_USER_INVITE+e)).data.data,xt=({userId:e})=>Bt({queryKey:["inviteData",e],queryFn:()=>fe(e)});function me({notificationOpen:e,setNotificationOpen:t,userId:o,refreshInvites:n}){const{data:i,isLoading:d,isError:c}=xt({userId:o}),l=async(a,p,g)=>{try{await ot.post(`${nt}/api/data/invites/respond`,{inviteId:a,accept:p==="accept",section:g},{withCredentials:!0}),window.location.reload(),n&&n()}catch(m){console.error("Error responding to invite:",m)}};return r.jsx(pe,{anchor:"right",open:e,onClose:()=>t(!1),children:r.jsxs("div",{className:"w-80 p-4",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Notifications"}),r.jsx(tt,{className:"mb-2"}),d&&r.jsx("div",{className:"flex justify-center items-center mt-10",children:r.jsx(Ot,{size:28})}),c&&r.jsx(M,{color:"error",className:"text-sm text-center mt-4",children:"Failed to load invites."}),!d&&!c&&r.jsx("ul",{className:"space-y-4 mt-3",children:i?.length?i.map(a=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm border",children:[r.jsxs("div",{className:"text-sm",children:[r.jsxs("p",{className:"font-medium",children:[a.invitedBy?.name," invited you to join a group"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",a.role," ·"," ",new Date(a.createdAt).toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>l(a._id,"accept",a.sectionId),className:"px-2 py-1 text-xs rounded-lg bg-green-500 text-white hover:bg-green-600",children:"✅"}),r.jsx("button",{onClick:()=>l(a._id,"reject",a.sectionId),className:"px-2 py-1 text-xs rounded-lg bg-red-500 text-white hover:bg-red-600",children:"X"})]})]},a._id)):r.jsx("li",{className:"text-sm text-gray-500 text-center",children:"No pending invites"})})]})})}const xe=({section:e})=>{const[t,o]=f.useState(!1),n=At();return r.jsxs("div",{className:"relative flex flex-col rounded-xl bg-white text-gray-700 shadow-md hover:shadow-lg transition-transform hover:scale-[1.02]",children:[r.jsxs("div",{className:"relative h-40 flex items-center justify-center bg-gradient-to-r rounded-t-xl overflow-hidden",children:[!t&&e?.logo&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 animate-pulse",children:r.jsx(M,{variant:"body2",color:"textSecondary",children:"Loading..."})}),e?.logo?r.jsx("img",{src:e?.logo,alt:e.name,className:"h-full w-full object-cover",onLoad:()=>o(!0)}):r.jsx(M,{variant:"h4",className:"text-gray-900 font-bold",children:e.name[0]})]}),r.jsx("div",{className:"px-6 pt-4 pb-2 text-center",children:r.jsx(M,{variant:"h6",className:"font-semibold",children:e.name})}),r.jsx("div",{className:"flex justify-center pb-4",children:r.jsx(J,{onClick:()=>{localStorage.setItem("sectionId",e._id),n("section/"+e._id)},endIcon:r.jsx(Ht,{}),sx:{px:3,py:1,fontSize:12,background:"linear-gradient(90deg, #007BFF 0%, #004A99 100%)",color:"#fff",borderRadius:2},children:"Proceed"})})]})},ve=()=>r.jsxs($t,{className:"flex flex-col rounded-xl bg-white shadow-md p-4",children:[r.jsx(Z,{variant:"rectangular",height:150,animation:"wave"}),r.jsx(Z,{variant:"text",width:"80%",sx:{mt:2,mx:"auto"}}),r.jsx(Z,{variant:"rectangular",width:"50%",height:36,sx:{mt:2,mx:"auto",borderRadius:1}})]}),De=()=>{const[e,t]=f.useState(!0),[o,n]=f.useState(!1),[i,d]=f.useState(!1),[c,l]=f.useState(null),a=Dt(),{enqueueSnackbar:p}=kt(),g=Tt(h=>h.auth.user);f.useEffect(()=>{const h=setTimeout(()=>t(!1),1200);return()=>clearTimeout(h)},[]);const m=async h=>{l(h),d(!0)},{data:x}=xt({userId:g?.user._id}),P=async()=>{if(c)try{await ot.post(`${nt}/api/campus/delete/section/${c}`,{},{withCredentials:!0}),p("Section deleted successfully!",{variant:"success",autoHideDuration:2500})}catch(h){p("Failed to delete section!",{variant:"error",autoHideDuration:2500}),console.error(h)}finally{d(!1),l(null)}};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"p-2 border-b border-b-[#e1e1e1] flex gap-3 items-center justify-between px-5",children:[r.jsx("img",{src:St,className:"h-10",alt:"Logo"}),r.jsxs("div",{className:"flex gap-4 items-center",children:[r.jsx(st,{title:"Notifications",arrow:!0,children:r.jsx(lt,{size:"small",sx:{color:"#1976d2"},onClick:()=>n(!0),children:r.jsxs(Kt,{color:"error",invisible:x?.length===0,children:[r.jsx(ge,{}),r.jsx("span",{className:"text-xs w-4  rounded-full bg-red-500 text-white h-4 ",children:x?.length})]})})}),r.jsx(st,{title:"Logout",arrow:!0,children:r.jsx(lt,{onClick:a,size:"small",sx:{color:"#f44336"},children:r.jsx(Nt,{sx:{cursor:"pointer"}})})})]})]}),g?.user?._id&&r.jsx(me,{notificationOpen:o,setNotificationOpen:n,userId:g.user?._id}),e?r.jsx("div",{className:"grid grid-cols-1 p-5 mt-4 md:grid-cols-3 lg:grid-cols-5 gap-6",children:[...Array(5)].map((h,y)=>r.jsx(ve,{},y))}):Array.isArray(g?.ownership)&&g.ownership.length?r.jsx("div",{className:"grid grid-cols-1 p-5 mt-4 md:grid-cols-3 lg:grid-cols-5 gap-6",children:g.ownership.map(h=>r.jsx(xe,{section:h.section,onDelete:()=>m(h._id)},h.section?._id))}):r.jsxs("div",{className:"p-6 text-center text-gray-500 border border-dashed border-gray-300 rounded-lg",children:[r.jsx(M,{variant:"body1",gutterBottom:!0,children:"Admin, no sections have been created yet."}),r.jsx(M,{variant:"body2",children:"Ask your admin to create sections."})]}),r.jsxs(Mt,{open:i,onClose:()=>d(!1),children:[r.jsx(_t,{children:"Confirm Deletion"}),r.jsx(Vt,{children:r.jsx(Wt,{children:"Are you sure you want to delete this section? This action cannot be undone."})}),r.jsxs(Ut,{children:[r.jsx(J,{onClick:()=>d(!1),children:"Cancel"}),r.jsx(J,{color:"error",onClick:P,children:"Delete"})]})]})]})};export{De as default};
