import{a0 as b,r as m,j as e,t as h,B as p}from"./index-BvY5VVbY.js";import{u as y}from"./useQuery-CU89VrzA.js";const u=async({slug:a,id:t,page:r})=>(await h.get(`${p}/api/campus/quiz/submissions/${a}/${t}`,{params:{page:r},withCredentials:!0})).data,N=()=>{const{slug:a,id:t}=b(),[r,d]=m.useState(1),{data:l,isLoading:o,isError:n,refetch:x}=y({queryKey:["quizPreview",a,t,r],queryFn:()=>u({slug:a,id:t,page:r}),enabled:!!a&&!!t,staleTime:1e3*60*5});if(o)return e.jsx("div",{className:"text-center py-10",children:"Loading..."});if(n)return e.jsxs("div",{className:"text-center py-10 text-red-500",children:["Failed to fetch data.",e.jsx("button",{onClick:()=>x(),className:"ml-2 underline text-indigo-600",children:"Retry"})]});const c=l?.list??[],i=l?.totalPages??1;return e.jsx("div",{className:"p-6 flex flex-col gap-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Submissions"}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-xl shadow-md",children:e.jsxs("table",{className:"w-full text-sm text-left border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 border-b border-b-gray-200",children:"Name"}),e.jsx("th",{className:"px-4 py-3 border-b border-b-gray-200",children:"Email"}),e.jsx("th",{className:"px-4 py-3 border-b border-b-gray-200",children:"Score"}),e.jsx("th",{className:"px-4 py-3 border-b border-b-gray-200",children:"Submitted At"})]})}),e.jsxs("tbody",{children:[c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 border-b border-b-gray-50",children:s.name}),e.jsx("td",{className:"px-4 py-4 border-b border-b-gray-50",children:s.email}),e.jsx("td",{className:"px-4 py-4 border-b border-b-gray-50",children:s.score}),e.jsx("td",{className:"px-4 py-4 border-b border-b-gray-50",children:new Date(s.updatedAt).toLocaleString()})]},s._id)),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-6 text-gray-500",children:"No submissions found."})})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Page ",r," of ",i]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>d(s=>Math.max(s-1,1)),disabled:r===1,className:"px-3 py-1 text-sm border rounded-md disabled:opacity-50 hover:bg-gray-100",children:"Prev"}),e.jsx("button",{onClick:()=>d(s=>Math.min(s+1,i)),disabled:r===i,className:"px-3 py-1 text-sm border rounded-md disabled:opacity-50 hover:bg-gray-100",children:"Next"})]})]})]})})};export{N as default};
