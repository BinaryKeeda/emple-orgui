import{r as i,u as h,a as p,j as e,L as j,T as x,I as g,b as f,c as b,d as v,e as y,B as w}from"./index-CEMFlCi4.js";import{T as r}from"./Typography-Bh9Wa-AS.js";import{S as m,A as N}from"./ArrowRight-COA9NQuU.js";import{D as S}from"./Delete-iHuC7UhI.js";import{B as L}from"./Button-DwPzP1N8.js";import"./index-Cop6QSZX.js";const k=({section:s,onDelete:a})=>{const[l,n]=i.useState(!1),c=v();return e.jsxs("div",{className:"relative flex flex-col rounded-xl bg-white text-gray-700 shadow-md hover:shadow-lg transition-transform hover:scale-[1.02]",children:[e.jsxs("div",{className:"relative h-40 flex items-center justify-center bg-gradient-to-r rounded-t-xl overflow-hidden",children:[!l&&s.logo&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 animate-pulse",children:e.jsx(r,{variant:"body2",color:"textSecondary",children:"Loading..."})}),s.logo?e.jsx("img",{src:s.logo,alt:s.name,className:"h-full w-full object-cover",onLoad:()=>n(!0)}):e.jsx(r,{variant:"h4",className:"text-gray-900 font-bold",children:s.name[0]}),e.jsx(x,{title:"Delete",arrow:!0,children:e.jsx(g,{size:"small",onClick:a,sx:{position:"absolute",top:8,right:8,color:"#fff",background:"rgba(0,0,0,0.4)","&:hover":{background:"rgba(255,0,0,0.6)"}},children:e.jsx(S,{fontSize:"small"})})})]}),e.jsx("div",{className:"px-6 pt-4 pb-2 text-center",children:e.jsx(r,{variant:"h6",className:"font-semibold",children:s.name})}),e.jsx("div",{className:"flex justify-center pb-4",children:e.jsx(L,{onClick:()=>{localStorage.setItem("sectionId",s._id),c("section/"+s._id)},endIcon:e.jsx(N,{}),sx:{px:3,py:1,fontSize:12,background:"linear-gradient(90deg, #007BFF 0%, #004A99 100%)",color:"#fff",borderRadius:2},children:"Proceed"})})]})},A=()=>e.jsxs(b,{className:"flex flex-col rounded-xl bg-white shadow-md p-4",children:[e.jsx(m,{variant:"rectangular",height:150,animation:"wave"}),e.jsx(m,{variant:"text",width:"80%",sx:{mt:2,mx:"auto"}}),e.jsx(m,{variant:"rectangular",width:"50%",height:36,sx:{mt:2,mx:"auto",borderRadius:1}})]}),E=()=>{const[s,a]=i.useState(""),[l,n]=i.useState(!0),c=h(),d=p(t=>t.auth.user);i.useEffect(()=>{const t=setTimeout(()=>n(!1),1200);return()=>clearTimeout(t)},[]);const u=async t=>{try{await y.post(w+"/api/campus/delete/section/"+t,{},{withCredentials:!0}),a("Section deleted successfully!")}catch(o){console.error(o),a(o.response?.data?.message||"Error deleting section")}};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"p-2 border-b border-b-[#e1e1e1] flex gap-3 items-center justify-between px-5",children:[e.jsx("img",{src:j,className:"h-10",alt:"Logo"}),e.jsx("div",{className:"flex gap-4 items-center",children:e.jsx(x,{title:"Logout",arrow:!0,children:e.jsx(g,{onClick:c,size:"small",sx:{color:"#f44336"},children:e.jsx(f,{sx:{cursor:"pointer"}})})})})]}),s&&e.jsx(r,{color:"success.main",className:"px-5 mt-2",children:s}),l?e.jsx("div",{className:"grid grid-cols-1 p-5 mt-4 md:grid-cols-3 lg:grid-cols-5 gap-6",children:[...Array(5)].map((t,o)=>e.jsx(A,{},o))}):Array.isArray(d?.ownership)&&d.ownership.length?e.jsx("div",{className:"grid grid-cols-1 p-5 mt-4 md:grid-cols-3 lg:grid-cols-5 gap-6",children:d.ownership.map(t=>e.jsx(k,{section:t.section,onDelete:()=>u(t._id)},t.section._id))}):e.jsxs("div",{className:"p-6 text-center text-gray-500 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(r,{variant:"body1",gutterBottom:!0,children:"Admin, no sections have been created yet."}),e.jsx(r,{variant:"body2",children:"Ask your admin to create sections."})]})]})};export{E as default};
