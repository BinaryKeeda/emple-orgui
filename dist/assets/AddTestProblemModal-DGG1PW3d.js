import{r as s,j as e,M as C,H as h,z as f,aR as v,aS as $,aT as B,N as E,C as L,x,B as p}from"./index-D5BKi87E.js";const M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:800,maxHeight:"80vh",bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:4,overflowY:"auto"};function R({open:r,onClose:b,onSuccess:y,testId:g,sectionId:j}){const[l,i]=s.useState([]),[c,S]=s.useState(1),[d,n]=s.useState(!1),[P,o]=s.useState(!0);s.useEffect(()=>{r&&(async()=>{n(!0);try{const u=(await x.get(`${p}/api/admin/problems?search=&category=&difficulty=&isAvailable=&page=${c}&limit=10&sortBy=createdAt&sortOrder=desc`,{withCredentials:!0})).data.data||[];i(A=>[...A,...u]),o(u.length>0)}catch(a){console.error("Error fetching problems:",a),o(!1)}finally{n(!1)}})()},[c,r]);const w=async t=>{try{await x.post(`${p}/api/admin/tests/${g}/sections/${j}/problem`,{problemId:t},{withCredentials:!0}),alert("Problem added successfully!"),y(),m()}catch(a){console.error("Failed to add problem:",a),alert("Failed to add problem")}},m=()=>{i([]),S(1),o(!0),b()};return e.jsx(C,{open:r,onClose:m,children:e.jsxs(h,{sx:M,children:[e.jsx(f,{variant:"h6",mb:2,children:"Select Problem to Add"}),e.jsx(v,{children:l.map(t=>e.jsx($,{divider:!0,secondaryAction:e.jsx(E,{size:"small",variant:"contained",onClick:()=>w(t._id),children:"Add"}),children:e.jsx(B,{primary:t.title,secondary:`Difficulty: ${t.difficulty}`})},t._id))}),d&&e.jsx(h,{className:"flex justify-center mt-4",children:e.jsx(L,{size:24})}),!d&&!P&&l.length===0&&e.jsx(f,{className:"text-center mt-4",color:"textSecondary",children:"No problems found."})]})})}export{R as default};
