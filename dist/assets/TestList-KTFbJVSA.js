import{g as Z,a as J,c as O,j as t,r as u,u as Y,b as P,s as M,d as ue,K as V,e as R,f as ee,P as te,m as ne,h as G,k as Ae,l as Te,$ as X,a0 as Q,az as Ee,a1 as se,aA as re,i as Le,aB as Me,ak as Re,ai as ze,y as Ie,I as Oe,J as De,a8 as $e,an as Be,ao as Fe,ap as He,aq as N,ar as m,as as We,S as U,ax as ae,V as Ne,ay as Ue,aa as Ve,au as qe,E as Ke,F as _e,G as Ge,W as Qe,L as Xe,N as ie,x as pe,B as ge}from"./index-BKh3Z22c.js";function Ze(e){return J("MuiAlert",e)}const le=Z("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Je=O(t.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),Ye=O(t.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),et=O(t.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),tt=O(t.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),nt=O(t.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),ot=e=>{const{variant:o,color:s,severity:n,classes:l}=e,g={root:["root",`color${R(s||n)}`,`${o}${R(s||n)}`,`${o}`],icon:["icon"],message:["message"],action:["action"]};return ee(g,Ze,l)},st=M(te,{name:"MuiAlert",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,o[s.variant],o[`${s.variant}${R(s.color||s.severity)}`]]}})(ne(({theme:e})=>{const o=e.palette.mode==="light"?e.darken:e.lighten,s=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(G(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:o(e.palette[n].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${n}StandardBg`]:s(e.palette[n].light,.9),[`& .${le.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(G(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:o(e.palette[n].light,.6),border:`1px solid ${(e.vars||e).palette[n].light}`,[`& .${le.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(G(["dark"])).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${n}FilledColor`],backgroundColor:e.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[n].dark:e.palette[n].main,color:e.palette.getContrastText(e.palette[n].main)}}}))]}})),rt=M("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),at=M("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),it=M("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),ce={success:t.jsx(Je,{fontSize:"inherit"}),warning:t.jsx(Ye,{fontSize:"inherit"}),error:t.jsx(et,{fontSize:"inherit"}),info:t.jsx(tt,{fontSize:"inherit"})},lt=u.forwardRef(function(o,s){const n=Y({props:o,name:"MuiAlert"}),{action:l,children:g,className:f,closeText:h="Close",color:x,components:C={},componentsProps:v={},icon:p,iconMapping:b=ce,onClose:S,role:i="alert",severity:c="success",slotProps:y={},slots:a={},variant:d="standard",...j}=n,w={...n,color:x,severity:c,variant:d,colorSeverity:x||c},A=ot(w),T={slots:{closeButton:C.CloseButton,closeIcon:C.CloseIcon,...a},slotProps:{...v,...y}},[z,r]=P("root",{ref:s,shouldForwardComponentProp:!0,className:ue(A.root,f),elementType:st,externalForwardedProps:{...T,...j},ownerState:w,additionalProps:{role:i,elevation:0}}),[I,D]=P("icon",{className:A.icon,elementType:rt,externalForwardedProps:T,ownerState:w}),[$,B]=P("message",{className:A.message,elementType:at,externalForwardedProps:T,ownerState:w}),[F,H]=P("action",{className:A.action,elementType:it,externalForwardedProps:T,ownerState:w}),[E,q]=P("closeButton",{elementType:V,externalForwardedProps:T,ownerState:w}),[K,_]=P("closeIcon",{elementType:nt,externalForwardedProps:T,ownerState:w});return t.jsxs(z,{...r,children:[p!==!1?t.jsx(I,{...D,children:p||b[c]||ce[c]}):null,t.jsx($,{...B,children:g}),l!=null?t.jsx(F,{...H,children:l}):null,l==null&&S?t.jsx(F,{...H,children:t.jsx(E,{size:"small","aria-label":h,title:h,color:"inherit",onClick:S,...q,children:t.jsx(K,{fontSize:"small",..._})})}):null]})});function de(e){return e.substring(2).toLowerCase()}function ct(e,o){return o.documentElement.clientWidth<e.clientX||o.documentElement.clientHeight<e.clientY}function dt(e){const{children:o,disableReactTree:s=!1,mouseEvent:n="onClick",onClickAway:l,touchEvent:g="onTouchEnd"}=e,f=u.useRef(!1),h=u.useRef(null),x=u.useRef(!1),C=u.useRef(!1);u.useEffect(()=>(setTimeout(()=>{x.current=!0},0),()=>{x.current=!1}),[]);const v=Ae(Te(o),h),p=X(i=>{const c=C.current;C.current=!1;const y=Q(h.current);if(!x.current||!h.current||"clientX"in i&&ct(i,y))return;if(f.current){f.current=!1;return}let a;i.composedPath?a=i.composedPath().includes(h.current):a=!y.documentElement.contains(i.target)||h.current.contains(i.target),!a&&(s||!c)&&l(i)}),b=i=>c=>{C.current=!0;const y=o.props[i];y&&y(c)},S={ref:v};return g!==!1&&(S[g]=b(g)),u.useEffect(()=>{if(g!==!1){const i=de(g),c=Q(h.current),y=()=>{f.current=!0};return c.addEventListener(i,p),c.addEventListener("touchmove",y),()=>{c.removeEventListener(i,p),c.removeEventListener("touchmove",y)}}},[p,g]),n!==!1&&(S[n]=b(n)),u.useEffect(()=>{if(n!==!1){const i=de(n),c=Q(h.current);return c.addEventListener(i,p),()=>{c.removeEventListener(i,p)}}},[p,n]),u.cloneElement(o,S)}function ut(e={}){const{autoHideDuration:o=null,disableWindowBlurListener:s=!1,onClose:n,open:l,resumeHideDuration:g}=e,f=Ee();u.useEffect(()=>{if(!l)return;function a(d){d.defaultPrevented||d.key==="Escape"&&n?.(d,"escapeKeyDown")}return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[l,n]);const h=X((a,d)=>{n?.(a,d)}),x=X(a=>{!n||a==null||f.start(a,()=>{h(null,"timeout")})});u.useEffect(()=>(l&&x(o),f.clear),[l,o,x,f]);const C=a=>{n?.(a,"clickaway")},v=f.clear,p=u.useCallback(()=>{o!=null&&x(g??o*.5)},[o,g,x]),b=a=>d=>{const j=a.onBlur;j?.(d),p()},S=a=>d=>{const j=a.onFocus;j?.(d),v()},i=a=>d=>{const j=a.onMouseEnter;j?.(d),v()},c=a=>d=>{const j=a.onMouseLeave;j?.(d),p()};return u.useEffect(()=>{if(!s&&l)return window.addEventListener("focus",p),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",v)}},[s,l,p,v]),{getRootProps:(a={})=>{const d={...se(e),...se(a)};return{role:"presentation",...a,...d,onBlur:b(d),onFocus:S(d),onMouseEnter:i(d),onMouseLeave:c(d)}},onClickAway:C}}function pt(e){return J("MuiSnackbarContent",e)}Z("MuiSnackbarContent",["root","message","action"]);const gt=e=>{const{classes:o}=e;return ee({root:["root"],action:["action"],message:["message"]},pt,o)},ft=M(te,{name:"MuiSnackbarContent",slot:"Root"})(ne(({theme:e})=>{const o=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(re(e.palette.background.default,o)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:re(e.palette.background.default,o),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),ht=M("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),xt=M("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),mt=u.forwardRef(function(o,s){const n=Y({props:o,name:"MuiSnackbarContent"}),{action:l,className:g,message:f,role:h="alert",...x}=n,C=n,v=gt(C);return t.jsxs(ft,{role:h,elevation:6,className:ue(v.root,g),ownerState:C,ref:s,...x,children:[t.jsx(ht,{className:v.message,ownerState:C,children:f}),l?t.jsx(xt,{className:v.action,ownerState:C,children:l}):null]})});function Ct(e){return J("MuiSnackbar",e)}Z("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const vt=e=>{const{classes:o,anchorOrigin:s}=e,n={root:["root",`anchorOrigin${R(s.vertical)}${R(s.horizontal)}`]};return ee(n,Ct,o)},yt=M("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,o[`anchorOrigin${R(s.anchorOrigin.vertical)}${R(s.anchorOrigin.horizontal)}`]]}})(ne(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:o})=>o.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:o})=>o.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:o})=>o.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:o})=>o.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:o})=>o.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),St=u.forwardRef(function(o,s){const n=Y({props:o,name:"MuiSnackbar"}),l=Le(),g={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{action:f,anchorOrigin:{vertical:h,horizontal:x}={vertical:"bottom",horizontal:"left"},autoHideDuration:C=null,children:v,className:p,ClickAwayListenerProps:b,ContentProps:S,disableWindowBlurListener:i=!1,message:c,onBlur:y,onClose:a,onFocus:d,onMouseEnter:j,onMouseLeave:w,open:A,resumeHideDuration:T,slots:z={},slotProps:r={},TransitionComponent:I,transitionDuration:D=g,TransitionProps:{onEnter:$,onExited:B,...F}={},...H}=n,E={...n,anchorOrigin:{vertical:h,horizontal:x},autoHideDuration:C,disableWindowBlurListener:i,TransitionComponent:I,transitionDuration:D},q=vt(E),{getRootProps:K,onClickAway:_}=ut(E),[fe,oe]=u.useState(!0),he=L=>{oe(!0),B&&B(L)},xe=(L,k)=>{oe(!1),$&&$(L,k)},W={slots:{transition:I,...z},slotProps:{content:S,clickAwayListener:b,transition:F,...r}},[me,Ce]=P("root",{ref:s,className:[q.root,p],elementType:yt,getSlotProps:K,externalForwardedProps:{...W,...H},ownerState:E}),[ve,{ownerState:ye,...Se}]=P("clickAwayListener",{elementType:dt,externalForwardedProps:W,getSlotProps:L=>({onClickAway:(...k)=>{const Pe=k[0];L.onClickAway?.(...k),!Pe?.defaultMuiPrevented&&_(...k)}}),ownerState:E}),[be,je]=P("content",{elementType:mt,shouldForwardComponentProp:!0,externalForwardedProps:W,additionalProps:{message:c,action:f},ownerState:E}),[ke,we]=P("transition",{elementType:Me,externalForwardedProps:W,getSlotProps:L=>({onEnter:(...k)=>{L.onEnter?.(...k),xe(...k)},onExited:(...k)=>{L.onExited?.(...k),he(...k)}}),additionalProps:{appear:!0,in:A,timeout:D,direction:h==="top"?"down":"up"},ownerState:E});return!A&&fe?null:t.jsx(ve,{...Se,...z.clickAwayListener&&{ownerState:ye},children:t.jsx(me,{...Ce,children:t.jsx(ke,{...we,children:v||t.jsx(be,{...je})})})})}),bt=async({sectionId:e,page:o,limit:s,search:n})=>(await pe.get(`${ge}/api/campus/test/get/section/${e}`,{params:{page:o,limit:s,search:n},withCredentials:!0})).data,kt=()=>{const{id:e}=Re(),o=ze(),[s,n]=u.useState(0),[l,g]=u.useState(10),[f,h]=u.useState(""),[x,C]=u.useState(f),[v,p]=u.useState(!1),[b,S]=u.useState(null),[i,c]=u.useState({open:!1,message:"",severity:"success"});u.useEffect(()=>{const r=setTimeout(()=>{C(f),n(0)},400);return()=>clearTimeout(r)},[f]);const{data:y,isLoading:a}=Ie({queryKey:["tests",e,s,l,x],queryFn:()=>bt({sectionId:e,page:s+1,limit:l,search:x}),enabled:!!e,staleTime:1e3*60*5}),d=y?.tests??[],j=y?.totalTests??0,w=(r,I)=>n(I),A=r=>{g(parseInt(r.target.value,10)),n(0)},T=r=>{S(r),p(!0)},z=async()=>{if(b)try{await pe.delete(`${ge}/api/campus/test/delete/${b._id}`,{withCredentials:!0}),c({open:!0,message:"Test deleted successfully",severity:"success"}),o.invalidateQueries({queryKey:["tests",e,s,l,x]})}catch(r){console.error(r),c({open:!0,message:"Failed to delete test",severity:"error"})}finally{p(!1),S(null)}};return t.jsxs(te,{sx:{p:3,borderRadius:3,overflow:"hidden"},children:[t.jsx(Oe,{size:"small",placeholder:"Search tests...",value:f,onChange:r=>h(r.target.value),sx:{mb:2,width:"100%",maxWidth:400},InputProps:{startAdornment:t.jsx(De,{position:"start",children:t.jsx($e,{})})}}),t.jsx(Be,{children:t.jsxs(Fe,{children:[t.jsx(He,{children:t.jsxs(N,{children:[t.jsx(m,{children:"Title"}),t.jsx(m,{children:"Category"}),t.jsx(m,{children:"Duration"}),t.jsx(m,{children:"Created By"}),t.jsx(m,{children:"Cost"}),t.jsx(m,{children:"Created At"}),t.jsx(m,{align:"center",children:"Actions"}),t.jsx(m,{align:"center",children:"Delete"})]})}),t.jsx(We,{children:a?t.jsx(N,{children:t.jsx(m,{colSpan:8,align:"center",children:"Loading..."})}):d.length===0?t.jsx(N,{children:t.jsx(m,{colSpan:8,align:"center",children:"No tests found."})}):d.map(r=>t.jsxs(N,{hover:!0,children:[t.jsx(m,{children:r.name}),t.jsx(m,{children:r.category}),t.jsxs(m,{children:[r.duration," min"]}),t.jsx(m,{children:r.creator?.name||"-"}),t.jsx(m,{children:r.costPerAttempt?t.jsx(U,{title:`Total: ${r.costPerAttempt} Ã— ${r.noOfSubmissions}`,arrow:!0,children:t.jsx("span",{children:r.costPerAttempt*(r.noOfSubmissions||0)})}):"-"}),t.jsx(m,{children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"-"}),t.jsxs(m,{align:"center",children:[t.jsx(U,{title:"Preview Test",children:t.jsx(V,{component:ae,to:`preview/${r?.slug}`,color:"primary",size:"small",children:t.jsx(Ne,{fontSize:"small"})})}),t.jsx(U,{title:"Edit Test",children:t.jsx(V,{component:ae,to:`edit/${r._id}`,color:"warning",size:"small",children:t.jsx(Ue,{fontSize:"small"})})})]}),t.jsx(m,{align:"center",children:t.jsx(U,{title:"Delete Test",children:t.jsx(V,{color:"error",size:"small",onClick:()=>T(r),children:t.jsx(Ve,{fontSize:"small"})})})})]},r._id))})]})}),t.jsx(qe,{component:"div",count:j,page:s,onPageChange:w,rowsPerPage:l,onRowsPerPageChange:A,rowsPerPageOptions:[5,10,20,50]}),t.jsxs(Ke,{open:v,onClose:()=>p(!1),children:[t.jsx(_e,{children:"Confirm Deletion"}),t.jsx(Ge,{children:t.jsxs(Qe,{children:['Are you sure you want to delete test "',b?.name,'"? This action cannot be undone.']})}),t.jsxs(Xe,{children:[t.jsx(ie,{onClick:()=>p(!1),color:"inherit",children:"Cancel"}),t.jsx(ie,{onClick:z,color:"error",variant:"contained",children:"Delete"})]})]}),t.jsx(St,{open:i.open,autoHideDuration:3e3,onClose:()=>c({...i,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(lt,{onClose:()=>c({...i,open:!1}),severity:i.severity,sx:{width:"100%"},children:i.message})})]})};export{kt as default};
