import{r as f,g as dt,a as pt,u as rt,b as F,c as _,s as E,j as e,d as v,e as et,m as U,f as vt,h as gt,T as xt,i as bt,k as yt,l as it,n as wt,o as jt,p as Rt,q as Pt,t as ot,B as nt,C as Ct,v as Ot,w as Dt,x as kt,L as Tt,y as st,I as lt,z as St,A as Nt,D as $t}from"./index-BuY4eNlI.js";import{u as At}from"./useQuery-D4reoL2g.js";import{o as ht,d as Bt,m as Et,M as Lt,P as It}from"./Modal-B2FXj-VE.js";import{g as zt}from"./dividerClasses-GkafQR8b.js";import{T as M}from"./Typography-D809mijF.js";import{D as Ft,a as Mt,b as Vt,c as Wt,d as _t}from"./DialogTitle-HeONuL50.js";import{B as J}from"./Button-DJkcb0lZ.js";import{S as Z,A as Ut}from"./ArrowRight-D7DGpy9g.js";const ut=r=>{const t=f.useRef({});return f.useEffect(()=>{t.current=r}),t.current};function Ht(r){const{badgeContent:t,invisible:o=!1,max:n=99,showZero:i=!1}=r,d=ut({badgeContent:t,max:n});let c=o;o===!1&&t===0&&!i&&(c=!0);const{badgeContent:l,max:a=n}=c?d:r,p=l&&Number(l)>a?`${a}+`:l;return{badgeContent:l,invisible:c,max:a,displayValue:p}}function Yt(r){return pt("MuiBadge",r)}const A=dt("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),K=10,Q=4,qt=r=>{const{color:t,anchorOrigin:o,invisible:n,overlap:i,variant:d,classes:c={}}=r,l={root:["root"],badge:["badge",d,n&&"invisible",`anchorOrigin${v(o.vertical)}${v(o.horizontal)}`,`anchorOrigin${v(o.vertical)}${v(o.horizontal)}${v(i)}`,`overlap${v(i)}`,t!=="default"&&`color${v(t)}`]};return et(l,Yt,c)},Xt=E("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Gt=E("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,t)=>{const{ownerState:o}=r;return[t.badge,t[o.variant],t[`anchorOrigin${v(o.anchorOrigin.vertical)}${v(o.anchorOrigin.horizontal)}${v(o.overlap)}`],o.color!=="default"&&t[`color${v(o.color)}`],o.invisible&&t.invisible]}})(U(({theme:r})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:K*2,lineHeight:1,padding:"0 6px",height:K*2,borderRadius:K,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.entries(r.palette).filter(vt(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(r.vars||r).palette[t].main,color:(r.vars||r).palette[t].contrastText}})),{props:{variant:"dot"},style:{borderRadius:Q,height:Q*2,minWidth:Q*2,padding:0}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${A.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${A.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${A.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${A.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${A.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${A.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${A.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${A.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]})));function ct(r){return{vertical:r?.vertical??"top",horizontal:r?.horizontal??"right"}}const Zt=f.forwardRef(function(t,o){const n=rt({props:t,name:"MuiBadge"}),{anchorOrigin:i,className:d,classes:c,component:l,components:a={},componentsProps:p={},children:g,overlap:m="rectangular",color:x="default",invisible:h=!1,max:C=99,badgeContent:w,slots:y,slotProps:S,showZero:L=!1,variant:O="standard",...N}=n,{badgeContent:P,invisible:V,max:b,displayValue:B}=Ht({max:C,invisible:h,badgeContent:w,showZero:L}),j=ut({anchorOrigin:ct(i),color:x,overlap:m,variant:O,badgeContent:w}),I=V||P==null&&O!=="dot",{color:H=x,overlap:D=m,anchorOrigin:k,variant:R=O}=I?j:n,W=ct(k),z=R!=="dot"?B:void 0,$={...n,badgeContent:P,invisible:I,max:b,displayValue:z,showZero:L,anchorOrigin:W,color:H,overlap:D,variant:R},s=qt($),u={slots:{root:y?.root??a.Root,badge:y?.badge??a.Badge},slotProps:{root:S?.root??p.root,badge:S?.badge??p.badge}},[T,X]=F("root",{elementType:Xt,externalForwardedProps:{...u,...N},ownerState:$,className:_(s.root,d),ref:o,additionalProps:{as:l}}),[G,Y]=F("badge",{elementType:Gt,externalForwardedProps:u,ownerState:$,className:s.badge});return e.jsxs(T,{...X,children:[g,e.jsx(G,{...Y,children:z})]})}),Kt=r=>{const{absolute:t,children:o,classes:n,flexItem:i,light:d,orientation:c,textAlign:l,variant:a}=r;return et({root:["root",t&&"absolute",a,d&&"light",c==="vertical"&&"vertical",i&&"flexItem",o&&"withChildren",o&&c==="vertical"&&"withChildrenVertical",l==="right"&&c!=="vertical"&&"textAlignRight",l==="left"&&c!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",c==="vertical"&&"wrapperVertical"]},zt,n)},Qt=E("div",{name:"MuiDivider",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:o}=r;return[t.root,o.absolute&&t.absolute,t[o.variant],o.light&&t.light,o.orientation==="vertical"&&t.vertical,o.flexItem&&t.flexItem,o.children&&t.withChildren,o.children&&o.orientation==="vertical"&&t.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&t.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&t.textAlignLeft]}})(U(({theme:r})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(r.vars||r).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:r.alpha((r.vars||r).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:r.spacing(2),marginRight:r.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:r.spacing(1),marginBottom:r.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(r.vars||r).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(r.vars||r).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Jt=E("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(r,t)=>{const{ownerState:o}=r;return[t.wrapper,o.orientation==="vertical"&&t.wrapperVertical]}})(U(({theme:r})=>({display:"inline-block",paddingLeft:`calc(${r.spacing(1)} * 1.2)`,paddingRight:`calc(${r.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${r.spacing(1)} * 1.2)`,paddingBottom:`calc(${r.spacing(1)} * 1.2)`}}]}))),tt=f.forwardRef(function(t,o){const n=rt({props:t,name:"MuiDivider"}),{absolute:i=!1,children:d,className:c,orientation:l="horizontal",component:a=d||l==="vertical"?"div":"hr",flexItem:p=!1,light:g=!1,role:m=a!=="hr"?"separator":void 0,textAlign:x="center",variant:h="fullWidth",...C}=n,w={...n,absolute:i,component:a,flexItem:p,light:g,orientation:l,role:m,textAlign:x,variant:h},y=Kt(w);return e.jsx(Qt,{as:a,className:_(y.root,c),role:m,ref:o,ownerState:w,"aria-orientation":m==="separator"&&(a!=="hr"||l==="vertical")?l:void 0,...C,children:d?e.jsx(Jt,{className:y.wrapper,ownerState:w,children:d}):null})});tt&&(tt.muiSkipListHighlight=!0);function tr(r,t,o){const n=t.getBoundingClientRect(),i=o&&o.getBoundingClientRect(),d=ht(t);let c;if(t.fakeTransform)c=t.fakeTransform;else{const p=d.getComputedStyle(t);c=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}let l=0,a=0;if(c&&c!=="none"&&typeof c=="string"){const p=c.split("(")[1].split(")")[0].split(",");l=parseInt(p[4],10),a=parseInt(p[5],10)}return r==="left"?i?`translateX(${i.right+l-n.left}px)`:`translateX(${d.innerWidth+l-n.left}px)`:r==="right"?i?`translateX(-${n.right-i.left-l}px)`:`translateX(-${n.left+n.width-l}px)`:r==="up"?i?`translateY(${i.bottom+a-n.top}px)`:`translateY(${d.innerHeight+a-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-a}px)`:`translateY(-${n.top+n.height-a}px)`}function rr(r){return typeof r=="function"?r():r}function q(r,t,o){const n=rr(o),i=tr(r,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const er=f.forwardRef(function(t,o){const n=gt(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},d={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:c,appear:l=!0,children:a,container:p,direction:g="down",easing:m=i,in:x,onEnter:h,onEntered:C,onEntering:w,onExit:y,onExited:S,onExiting:L,style:O,timeout:N=d,TransitionComponent:P=xt,...V}=t,b=f.useRef(null),B=bt(yt(a),b,o),j=s=>u=>{s&&(u===void 0?s(b.current):s(b.current,u))},I=j((s,u)=>{q(g,s,p),wt(s),h&&h(s,u)}),H=j((s,u)=>{const T=it({timeout:N,style:O,easing:m},{mode:"enter"});s.style.webkitTransition=n.transitions.create("-webkit-transform",{...T}),s.style.transition=n.transitions.create("transform",{...T}),s.style.webkitTransform="none",s.style.transform="none",w&&w(s,u)}),D=j(C),k=j(L),R=j(s=>{const u=it({timeout:N,style:O,easing:m},{mode:"exit"});s.style.webkitTransition=n.transitions.create("-webkit-transform",u),s.style.transition=n.transitions.create("transform",u),q(g,s,p),y&&y(s)}),W=j(s=>{s.style.webkitTransition="",s.style.transition="",S&&S(s)}),z=s=>{c&&c(b.current,s)},$=f.useCallback(()=>{b.current&&q(g,b.current,p)},[g,p]);return f.useEffect(()=>{if(x||g==="down"||g==="right")return;const s=Bt(()=>{b.current&&q(g,b.current,p)}),u=ht(b.current);return u.addEventListener("resize",s),()=>{s.clear(),u.removeEventListener("resize",s)}},[g,x,p]),f.useEffect(()=>{x||$()},[x,$]),e.jsx(P,{nodeRef:b,onEnter:I,onEntered:D,onEntering:H,onExit:R,onExited:W,onExiting:k,addEndListener:z,appear:l,in:x,timeout:N,...V,children:(s,{ownerState:u,...T})=>f.cloneElement(a,{ref:B,style:{visibility:s==="exited"&&!x?"hidden":void 0,...O,...a.props.style},...T})})});function or(r){return pt("MuiDrawer",r)}dt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const ft=(r,t)=>{const{ownerState:o}=r;return[t.root,(o.variant==="permanent"||o.variant==="persistent")&&t.docked,t.modal]},nr=r=>{const{classes:t,anchor:o,variant:n}=r,i={root:["root",`anchor${v(o)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${v(o)}`,n!=="temporary"&&`paperAnchorDocked${v(o)}`]};return et(i,or,t)},ar=E(Lt,{name:"MuiDrawer",slot:"Root",overridesResolver:ft})(U(({theme:r})=>({zIndex:(r.vars||r).zIndex.drawer}))),ir=E("div",{shouldForwardProp:Rt,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:ft})({flex:"0 0 auto"}),sr=E(It,{name:"MuiDrawer",slot:"Paper",overridesResolver:(r,t)=>{const{ownerState:o}=r;return[t.paper,t[`paperAnchor${v(o.anchor)}`],o.variant!=="temporary"&&t[`paperAnchorDocked${v(o.anchor)}`]]}})(U(({theme:r})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(r.vars||r).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(r.vars||r).palette.divider}`}}]}))),mt={left:"right",right:"left",top:"down",bottom:"up"};function lr(r){return["left","right"].includes(r)}function cr({direction:r},t){return r==="rtl"&&lr(t)?mt[t]:t}const dr=f.forwardRef(function(t,o){const n=rt({props:t,name:"MuiDrawer"}),i=gt(),d=jt(),c={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:a,children:p,className:g,elevation:m=16,hideBackdrop:x=!1,ModalProps:{BackdropProps:h,...C}={},onClose:w,open:y=!1,PaperProps:S={},SlideProps:L,TransitionComponent:O,transitionDuration:N=c,variant:P="temporary",slots:V={},slotProps:b={},...B}=n,j=f.useRef(!1);f.useEffect(()=>{j.current=!0},[]);const I=cr({direction:d?"rtl":"ltr"},l),D={...n,anchor:l,elevation:m,open:y,variant:P,...B},k=nr(D),R={slots:{transition:O,...V},slotProps:{paper:S,transition:L,...b,backdrop:Et(b.backdrop||{...a,...h},{transitionDuration:N})}},[W,z]=F("root",{ref:o,elementType:ar,className:_(k.root,k.modal,g),shouldForwardComponentProp:!0,ownerState:D,externalForwardedProps:{...R,...B,...C},additionalProps:{open:y,onClose:w,hideBackdrop:x,slots:{backdrop:R.slots.backdrop},slotProps:{backdrop:R.slotProps.backdrop}}}),[$,s]=F("paper",{elementType:sr,shouldForwardComponentProp:!0,className:_(k.paper,S.className),ownerState:D,externalForwardedProps:R,additionalProps:{elevation:P==="temporary"?m:0,square:!0,...P==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[u,T]=F("docked",{elementType:ir,ref:o,className:_(k.root,k.docked,g),ownerState:D,externalForwardedProps:R,additionalProps:B}),[X,G]=F("transition",{elementType:er,ownerState:D,externalForwardedProps:R,additionalProps:{in:y,direction:mt[I],timeout:N,appear:j.current}}),Y=e.jsx($,{...s,children:p});if(P==="permanent")return e.jsx(u,{...T,children:Y});const at=e.jsx(X,{...G,children:Y});return P==="persistent"?e.jsx(u,{...T,children:at}):e.jsx(W,{...z,children:at})}),pr=Pt(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),gr={GET_USER_INVITE:"/api/data/user/invites/"},hr=ot.create({baseURL:nt,withCredentials:!0,headers:{"Content-Type":"application/json"}}),ur=async r=>(await hr.get(gr.GET_USER_INVITE+r)).data.data,fr=({userId:r})=>At({queryKey:["inviteData",r],queryFn:()=>ur(r)});function mr({notificationOpen:r,setNotificationOpen:t,userId:o,refreshInvites:n}){const{data:i,isLoading:d,isError:c}=fr({userId:o}),l=async(a,p,g)=>{try{await ot.post(`${nt}/api/data/invites/respond`,{inviteId:a,accept:p==="accept",section:g},{withCredentials:!0}),window.location.reload(),n&&n()}catch(m){console.error("Error responding to invite:",m)}};return e.jsx(dr,{anchor:"right",open:r,onClose:()=>t(!1),children:e.jsxs("div",{className:"w-80 p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Notifications"}),e.jsx(tt,{className:"mb-2"}),d&&e.jsx("div",{className:"flex justify-center items-center mt-10",children:e.jsx(Ct,{size:28})}),c&&e.jsx(M,{color:"error",className:"text-sm text-center mt-4",children:"Failed to load invites."}),!d&&!c&&e.jsx("ul",{className:"space-y-4 mt-3",children:i?.length?i.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm border",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium",children:[a.invitedBy?.name," invited you to join a group"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",a.role," ·"," ",new Date(a.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l(a._id,"accept",a.sectionId),className:"px-2 py-1 text-xs rounded-lg bg-green-500 text-white hover:bg-green-600",children:"✅"}),e.jsx("button",{onClick:()=>l(a._id,"reject",a.sectionId),className:"px-2 py-1 text-xs rounded-lg bg-red-500 text-white hover:bg-red-600",children:"❌"})]})]},a._id)):e.jsx("li",{className:"text-sm text-gray-500 text-center",children:"No pending invites"})})]})})}const vr=({section:r})=>{const[t,o]=f.useState(!1),n=$t();return e.jsxs("div",{className:"relative flex flex-col rounded-xl bg-white text-gray-700 shadow-md hover:shadow-lg transition-transform hover:scale-[1.02]",children:[e.jsxs("div",{className:"relative h-40 flex items-center justify-center bg-gradient-to-r rounded-t-xl overflow-hidden",children:[!t&&r.logo&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 animate-pulse",children:e.jsx(M,{variant:"body2",color:"textSecondary",children:"Loading..."})}),r.logo?e.jsx("img",{src:r.logo,alt:r.name,className:"h-full w-full object-cover",onLoad:()=>o(!0)}):e.jsx(M,{variant:"h4",className:"text-gray-900 font-bold",children:r.name[0]})]}),e.jsx("div",{className:"px-6 pt-4 pb-2 text-center",children:e.jsx(M,{variant:"h6",className:"font-semibold",children:r.name})}),e.jsx("div",{className:"flex justify-center pb-4",children:e.jsx(J,{onClick:()=>{localStorage.setItem("sectionId",r._id),n("section/"+r._id)},endIcon:e.jsx(Ut,{}),sx:{px:3,py:1,fontSize:12,background:"linear-gradient(90deg, #007BFF 0%, #004A99 100%)",color:"#fff",borderRadius:2},children:"Proceed"})})]})},xr=()=>e.jsxs(Nt,{className:"flex flex-col rounded-xl bg-white shadow-md p-4",children:[e.jsx(Z,{variant:"rectangular",height:150,animation:"wave"}),e.jsx(Z,{variant:"text",width:"80%",sx:{mt:2,mx:"auto"}}),e.jsx(Z,{variant:"rectangular",width:"50%",height:36,sx:{mt:2,mx:"auto",borderRadius:1}})]}),Dr=()=>{const[r,t]=f.useState(!0),[o,n]=f.useState(!1),[i,d]=f.useState(!1),[c,l]=f.useState(null),a=Ot(),{enqueueSnackbar:p}=Dt(),g=kt(h=>h.auth.user);f.useEffect(()=>{const h=setTimeout(()=>t(!1),1200);return()=>clearTimeout(h)},[]);const m=async h=>{l(h),d(!0)},x=async()=>{if(c)try{await ot.post(`${nt}/api/campus/delete/section/${c}`,{},{withCredentials:!0}),p("Section deleted successfully!",{variant:"success",autoHideDuration:2500})}catch(h){p("Failed to delete section!",{variant:"error",autoHideDuration:2500}),console.error(h)}finally{d(!1),l(null)}};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"p-2 border-b border-b-[#e1e1e1] flex gap-3 items-center justify-between px-5",children:[e.jsx("img",{src:Tt,className:"h-10",alt:"Logo"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(st,{title:"Notifications",arrow:!0,children:e.jsx(lt,{size:"small",sx:{color:"#1976d2"},onClick:()=>n(!0),children:e.jsx(Zt,{color:"error",variant:"dot",children:e.jsx(pr,{})})})}),e.jsx(st,{title:"Logout",arrow:!0,children:e.jsx(lt,{onClick:a,size:"small",sx:{color:"#f44336"},children:e.jsx(St,{sx:{cursor:"pointer"}})})})]})]}),g?.user?._id&&e.jsx(mr,{notificationOpen:o,setNotificationOpen:n,userId:g.user?._id}),r?e.jsx("div",{className:"grid grid-cols-1 p-5 mt-4 md:grid-cols-3 lg:grid-cols-5 gap-6",children:[...Array(5)].map((h,C)=>e.jsx(xr,{},C))}):Array.isArray(g?.ownership)&&g.ownership.length?e.jsx("div",{className:"grid grid-cols-1 p-5 mt-4 md:grid-cols-3 lg:grid-cols-5 gap-6",children:g.ownership.map(h=>e.jsx(vr,{section:h.section,onDelete:()=>m(h._id)},h.section?._id))}):e.jsxs("div",{className:"p-6 text-center text-gray-500 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(M,{variant:"body1",gutterBottom:!0,children:"Admin, no sections have been created yet."}),e.jsx(M,{variant:"body2",children:"Ask your admin to create sections."})]}),e.jsxs(Ft,{open:i,onClose:()=>d(!1),children:[e.jsx(Mt,{children:"Confirm Deletion"}),e.jsx(Vt,{children:e.jsx(Wt,{children:"Are you sure you want to delete this section? This action cannot be undone."})}),e.jsxs(_t,{children:[e.jsx(J,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(J,{color:"error",onClick:x,children:"Delete"})]})]})]})};export{Dr as default};
