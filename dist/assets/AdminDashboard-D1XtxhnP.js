import{c as de,j as t,r as g,g as pe,a as ue,u as he,b as M,d as q,s as W,e as v,f as ge,m as ae,h as Se,i as fe,T as Ne,k as Te,l as De,o as me,n as Ee,p as le,q as $e,t as Be,v as Ae,M as Ie,P as ze,w as Le,x as G,B as K,y as Me,D as Fe,C as xe,z as F,A as ve,E as be,F as ye,G as we,H as je,I as J,J as ee,K as Y,V as te,L as Pe,N as _,O as _e,Q as Ve,R as We,S as Ue,U as He,W as Xe,X as qe}from"./index-BKh3Z22c.js";import{S as re,A as Ye}from"./Skeleton-DgRF5uGq.js";const Ge=de(t.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),oe=de(t.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}));function Ce(r){const e=g.useRef({});return g.useEffect(()=>{e.current=r}),e.current}function Ke(r){const{badgeContent:e,invisible:n=!1,max:o=99,showZero:a=!1}=r,l=Ce({badgeContent:e,max:o});let u=n;n===!1&&e===0&&!a&&(u=!0);const{badgeContent:c,max:i=o}=u?l:r,h=c&&Number(c)>i?`${i}+`:c;return{badgeContent:c,invisible:u,max:i,displayValue:h}}function Qe(r){return ue("MuiBadge",r)}const I=pe("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),ne=10,se=4,Ze=r=>{const{color:e,anchorOrigin:n,invisible:o,overlap:a,variant:l,classes:u={}}=r,c={root:["root"],badge:["badge",l,o&&"invisible",`anchorOrigin${v(n.vertical)}${v(n.horizontal)}`,`anchorOrigin${v(n.vertical)}${v(n.horizontal)}${v(a)}`,`overlap${v(a)}`,e!=="default"&&`color${v(e)}`]};return ge(c,Qe,u)},Je=W("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),et=W("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.badge,e[n.variant],e[`anchorOrigin${v(n.anchorOrigin.vertical)}${v(n.anchorOrigin.horizontal)}${v(n.overlap)}`],n.color!=="default"&&e[`color${v(n.color)}`],n.invisible&&e.invisible]}})(ae(({theme:r})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:ne*2,lineHeight:1,padding:"0 6px",height:ne*2,borderRadius:ne,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.entries(r.palette).filter(Se(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(r.vars||r).palette[e].main,color:(r.vars||r).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:se,height:se*2,minWidth:se*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${I.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${I.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${I.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${I.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${I.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${I.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${I.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${I.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]})));function ce(r){return{vertical:r?.vertical??"top",horizontal:r?.horizontal??"right"}}const tt=g.forwardRef(function(e,n){const o=he({props:e,name:"MuiBadge"}),{anchorOrigin:a,className:l,classes:u,component:c,components:i={},componentsProps:h={},children:m,overlap:b="rectangular",color:f="default",invisible:S=!1,max:C=99,badgeContent:R,slots:d,slotProps:w,showZero:$=!1,variant:j="standard",...N}=o,{badgeContent:P,invisible:B,max:p,displayValue:y}=Ke({max:C,invisible:S,badgeContent:R,showZero:$}),O=Ce({anchorOrigin:ce(a),color:f,overlap:b,variant:j,badgeContent:R}),z=B||P==null&&j!=="dot",{color:U=f,overlap:T=b,anchorOrigin:D,variant:k=j}=z?O:o,V=ce(D),L=k!=="dot"?y:void 0,A={...o,badgeContent:P,invisible:z,max:p,displayValue:L,showZero:$,anchorOrigin:V,color:U,overlap:T,variant:k},s=Ze(A),x={slots:{root:d?.root??i.Root,badge:d?.badge??i.Badge},slotProps:{root:w?.root??h.root,badge:w?.badge??h.badge}},[E,Q]=M("root",{elementType:Je,externalForwardedProps:{...x,...N},ownerState:A,className:q(s.root,l),ref:n,additionalProps:{as:c}}),[Z,H]=M("badge",{elementType:et,externalForwardedProps:x,ownerState:A,className:s.badge});return t.jsxs(E,{...Q,children:[m,t.jsx(Z,{...H,children:L})]})});function rt(r,e,n){const o=e.getBoundingClientRect(),a=n&&n.getBoundingClientRect(),l=me(e);let u;if(e.fakeTransform)u=e.fakeTransform;else{const h=l.getComputedStyle(e);u=h.getPropertyValue("-webkit-transform")||h.getPropertyValue("transform")}let c=0,i=0;if(u&&u!=="none"&&typeof u=="string"){const h=u.split("(")[1].split(")")[0].split(",");c=parseInt(h[4],10),i=parseInt(h[5],10)}return r==="left"?a?`translateX(${a.right+c-o.left}px)`:`translateX(${l.innerWidth+c-o.left}px)`:r==="right"?a?`translateX(-${o.right-a.left-c}px)`:`translateX(-${o.left+o.width-c}px)`:r==="up"?a?`translateY(${a.bottom+i-o.top}px)`:`translateY(${l.innerHeight+i-o.top}px)`:a?`translateY(-${o.top-a.top+o.height-i}px)`:`translateY(-${o.top+o.height-i}px)`}function ot(r){return typeof r=="function"?r():r}function X(r,e,n){const o=ot(n),a=rt(r,e,o);a&&(e.style.webkitTransform=a,e.style.transform=a)}const nt=g.forwardRef(function(e,n){const o=fe(),a={enter:o.transitions.easing.easeOut,exit:o.transitions.easing.sharp},l={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:u,appear:c=!0,children:i,container:h,direction:m="down",easing:b=a,in:f,onEnter:S,onEntered:C,onEntering:R,onExit:d,onExited:w,onExiting:$,style:j,timeout:N=l,TransitionComponent:P=Ne,...B}=e,p=g.useRef(null),y=Te(De(i),p,n),O=s=>x=>{s&&(x===void 0?s(p.current):s(p.current,x))},z=O((s,x)=>{X(m,s,h),$e(s),S&&S(s,x)}),U=O((s,x)=>{const E=le({timeout:N,style:j,easing:b},{mode:"enter"});s.style.webkitTransition=o.transitions.create("-webkit-transform",{...E}),s.style.transition=o.transitions.create("transform",{...E}),s.style.webkitTransform="none",s.style.transform="none",R&&R(s,x)}),T=O(C),D=O($),k=O(s=>{const x=le({timeout:N,style:j,easing:b},{mode:"exit"});s.style.webkitTransition=o.transitions.create("-webkit-transform",x),s.style.transition=o.transitions.create("transform",x),X(m,s,h),d&&d(s)}),V=O(s=>{s.style.webkitTransition="",s.style.transition="",w&&w(s)}),L=s=>{u&&u(p.current,s)},A=g.useCallback(()=>{p.current&&X(m,p.current,h)},[m,h]);return g.useEffect(()=>{if(f||m==="down"||m==="right")return;const s=Ee(()=>{p.current&&X(m,p.current,h)}),x=me(p.current);return x.addEventListener("resize",s),()=>{s.clear(),x.removeEventListener("resize",s)}},[m,f,h]),g.useEffect(()=>{f||A()},[f,A]),t.jsx(P,{nodeRef:p,onEnter:z,onEntered:T,onEntering:U,onExit:k,onExited:V,onExiting:D,addEndListener:L,appear:c,in:f,timeout:N,...B,children:(s,{ownerState:x,...E})=>g.cloneElement(i,{ref:y,style:{visibility:s==="exited"&&!f?"hidden":void 0,...j,...i.props.style},...E})})});function st(r){return ue("MuiDrawer",r)}pe("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Re=(r,e)=>{const{ownerState:n}=r;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},at=r=>{const{classes:e,anchor:n,variant:o}=r,a={root:["root",`anchor${v(n)}`],docked:[(o==="permanent"||o==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${v(n)}`,o!=="temporary"&&`paperAnchorDocked${v(n)}`]};return ge(a,st,e)},it=W(Ie,{name:"MuiDrawer",slot:"Root",overridesResolver:Re})(ae(({theme:r})=>({zIndex:(r.vars||r).zIndex.drawer}))),lt=W("div",{shouldForwardProp:Le,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Re})({flex:"0 0 auto"}),ct=W(ze,{name:"MuiDrawer",slot:"Paper",overridesResolver:(r,e)=>{const{ownerState:n}=r;return[e.paper,e[`paperAnchor${v(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${v(n.anchor)}`]]}})(ae(({theme:r})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(r.vars||r).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(r.vars||r).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(r.vars||r).palette.divider}`}}]}))),Oe={left:"right",right:"left",top:"down",bottom:"up"};function dt(r){return["left","right"].includes(r)}function pt({direction:r},e){return r==="rtl"&&dt(e)?Oe[e]:e}const ut=g.forwardRef(function(e,n){const o=he({props:e,name:"MuiDrawer"}),a=fe(),l=Be(),u={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{anchor:c="left",BackdropProps:i,children:h,className:m,elevation:b=16,hideBackdrop:f=!1,ModalProps:{BackdropProps:S,...C}={},onClose:R,open:d=!1,PaperProps:w={},SlideProps:$,TransitionComponent:j,transitionDuration:N=u,variant:P="temporary",slots:B={},slotProps:p={},...y}=o,O=g.useRef(!1);g.useEffect(()=>{O.current=!0},[]);const z=pt({direction:l?"rtl":"ltr"},c),T={...o,anchor:c,elevation:b,open:d,variant:P,...y},D=at(T),k={slots:{transition:j,...B},slotProps:{paper:w,transition:$,...p,backdrop:Ae(p.backdrop||{...i,...S},{transitionDuration:N})}},[V,L]=M("root",{ref:n,elementType:it,className:q(D.root,D.modal,m),shouldForwardComponentProp:!0,ownerState:T,externalForwardedProps:{...k,...y,...C},additionalProps:{open:d,onClose:R,hideBackdrop:f,slots:{backdrop:k.slots.backdrop},slotProps:{backdrop:k.slotProps.backdrop}}}),[A,s]=M("paper",{elementType:ct,shouldForwardComponentProp:!0,className:q(D.paper,w.className),ownerState:T,externalForwardedProps:k,additionalProps:{elevation:P==="temporary"?b:0,square:!0,...P==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[x,E]=M("docked",{elementType:lt,ref:n,className:q(D.root,D.docked,m),ownerState:T,externalForwardedProps:k,additionalProps:y}),[Q,Z]=M("transition",{elementType:nt,ownerState:T,externalForwardedProps:k,additionalProps:{in:d,direction:Oe[z],timeout:N,appear:O.current}}),H=t.jsx(A,{...s,children:h});if(P==="permanent")return t.jsx(x,{...E,children:H});const ie=t.jsx(Q,{...Z,children:H});return P==="persistent"?t.jsx(x,{...E,children:ie}):t.jsx(V,{...L,children:ie})}),ht={GET_USER_INVITE:"/api/data/user/invites/"},gt=G.create({baseURL:K,withCredentials:!0,headers:{"Content-Type":"application/json"}}),ft=async r=>(await gt.get(ht.GET_USER_INVITE+r)).data.data,ke=({userId:r})=>Me({queryKey:["inviteData",r],queryFn:()=>ft(r)});function mt({notificationOpen:r,setNotificationOpen:e,userId:n,refreshInvites:o}){const{data:a,isLoading:l,isError:u}=ke({userId:n}),c=async(i,h,m)=>{try{await G.post(`${K}/api/data/invites/respond`,{inviteId:i,accept:h==="accept",section:m},{withCredentials:!0}),window.location.reload(),o&&o()}catch(b){console.error("Error responding to invite:",b)}};return t.jsx(ut,{anchor:"right",open:r,onClose:()=>e(!1),children:t.jsxs("div",{className:"w-80 p-4",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Notifications"}),t.jsx(Fe,{className:"mb-2"}),l&&t.jsx("div",{className:"flex justify-center items-center mt-10",children:t.jsx(xe,{size:28})}),u&&t.jsx(F,{color:"error",className:"text-sm text-center mt-4",children:"Failed to load invites."}),!l&&!u&&t.jsx("ul",{className:"space-y-4 mt-3",children:a?.length?a.map(i=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm border",children:[t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{className:"font-medium",children:[i.invitedBy?.name," invited you to join a group"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",i.role," ·"," ",new Date(i.createdAt).toLocaleString()]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>c(i._id,"accept",i.sectionId),className:"px-2 py-1 text-xs rounded-lg bg-green-500 text-white hover:bg-green-600",children:"✅"}),t.jsx("button",{onClick:()=>c(i._id,"reject",i.sectionId),className:"px-2 py-1 text-xs rounded-lg bg-red-500 text-white hover:bg-red-600",children:"X"})]})]},i._id)):t.jsx("li",{className:"text-sm text-gray-500 text-center",children:"No pending invites"})})]})})}function xt({open:r,onClose:e,onReset:n}){const[o,a]=g.useState(""),[l,u]=g.useState(""),[c,i]=g.useState(""),{enqueueSnackbar:h}=ve(),[m,b]=g.useState(!1),[f,S]=g.useState(!1),[C,R]=g.useState(!1),[d,w]=g.useState(!1),$=()=>o?l?l.length<8?"New password must be at least 8 characters.":l===o?"New password must be different from old password.":c?l!==c?"New password and confirm password do not match.":null:"Please confirm your new password.":"Please enter a new password.":"Please enter your current password.",j=c.length>0&&c!==l,N=!o||!l||l.length<8||j||d,P=async()=>{if(!$()){w(!0);try{if(n)await n({oldPassword:o,newPassword:l});else try{await G.post(`${K}/auth/reset/password`,{oldPassword:o,newPassword:l},{withCredentials:!0}),h("Password changed successfully.",{variant:"success"})}catch(y){if(y.response&&y.response.data&&y.response.data.message)throw h(y.response.data.message,{variant:"error"}),new Error(y.response.data.message)}}catch{}finally{w(!1)}}},B=()=>{a(""),u(""),i(""),e()};return t.jsxs(be,{open:r,onClose:B,fullWidth:!0,maxWidth:"xs",children:[t.jsx(ye,{children:"Reset password"}),t.jsx(we,{children:t.jsxs(je,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[t.jsx(J,{label:"Current password",type:m?"text":"password",value:o,onChange:p=>a(p.target.value),fullWidth:!0,autoFocus:!0,disabled:d,InputProps:{endAdornment:t.jsx(ee,{position:"end",children:t.jsx(Y,{onClick:()=>b(p=>!p),edge:"end",size:"large",children:m?t.jsx(oe,{}):t.jsx(te,{})})})}}),t.jsx(J,{label:"New password",type:f?"text":"password",value:l,onChange:p=>u(p.target.value),fullWidth:!0,disabled:d,helperText:"Minimum 8 characters",InputProps:{endAdornment:t.jsx(ee,{position:"end",children:t.jsx(Y,{onClick:()=>S(p=>!p),edge:"end",size:"large",children:f?t.jsx(oe,{}):t.jsx(te,{})})})}}),t.jsx(J,{label:"Confirm new password",type:C?"text":"password",value:c,onChange:p=>i(p.target.value),fullWidth:!0,disabled:d,error:j,helperText:j?"Passwords do not match":"",InputProps:{endAdornment:t.jsx(ee,{position:"end",children:t.jsx(Y,{onClick:()=>R(p=>!p),edge:"end",size:"large",children:C?t.jsx(oe,{}):t.jsx(te,{})})})}})]})}),t.jsxs(Pe,{sx:{px:3,py:2},children:[t.jsx(_,{onClick:B,disabled:d,children:"Cancel"}),t.jsx(_,{variant:"contained",onClick:P,disabled:N,startIcon:d?t.jsx(xe,{size:18}):null,children:"Reset password"})]})]})}const vt=({section:r})=>{const[e,n]=g.useState(!1),o=qe();return t.jsxs("div",{className:"relative flex flex-col rounded-xl bg-white text-gray-700 shadow-md hover:shadow-lg transition-transform hover:scale-[1.02]",children:[t.jsxs("div",{className:"relative h-40 flex items-center justify-center bg-gradient-to-r rounded-t-xl overflow-hidden",children:[!e&&r?.logo&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 animate-pulse",children:t.jsx(F,{variant:"body2",color:"textSecondary",children:"Loading..."})}),r?.logo?t.jsx("img",{src:r?.logo,alt:r.name,className:"h-full w-full object-cover",onLoad:()=>n(!0)}):t.jsx(F,{variant:"h4",className:"text-gray-900 font-bold",children:r.name[0]})]}),t.jsx("div",{className:"px-6 pt-4 pb-2 text-center",children:t.jsx(F,{variant:"h6",className:"font-semibold",children:r.name})}),t.jsx("div",{className:"flex justify-center pb-4",children:t.jsx(_,{onClick:()=>{localStorage.setItem("sectionId",r._id),o("section/"+r._id)},endIcon:t.jsx(Ye,{}),sx:{px:3,py:1,fontSize:12,background:"linear-gradient(90deg, #007BFF 0%, #004A99 100%)",color:"#fff",borderRadius:2},children:"Proceed"})})]})},bt=()=>t.jsxs(je,{className:"flex flex-col rounded-xl bg-white shadow-md p-4",children:[t.jsx(re,{variant:"rectangular",height:150,animation:"wave"}),t.jsx(re,{variant:"text",width:"80%",sx:{mt:2,mx:"auto"}}),t.jsx(re,{variant:"rectangular",width:"50%",height:36,sx:{mt:2,mx:"auto",borderRadius:1}})]}),jt=()=>{const[r,e]=g.useState(!0),[n,o]=g.useState(!1),[a,l]=g.useState(!1),[u,c]=g.useState(null),[i,h]=g.useState(!1),m=_e(),{enqueueSnackbar:b}=ve(),f=Ve(d=>d.auth.user);g.useEffect(()=>{const d=setTimeout(()=>e(!1),1200);return()=>clearTimeout(d)},[]);const S=async d=>{c(d),l(!0)},{data:C}=ke({userId:f?.user._id}),R=async()=>{if(u)try{await G.post(`${K}/api/campus/delete/section/${u}`,{},{withCredentials:!0}),b("Section deleted successfully!",{variant:"success",autoHideDuration:2500})}catch(d){b("Failed to delete section!",{variant:"error",autoHideDuration:2500}),console.error(d)}finally{l(!1),c(null)}};return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"p-2 border-b border-b-[#e1e1e1] flex gap-3 items-center justify-between px-5",children:[t.jsx("img",{src:We,className:"h-10",alt:"Logo"}),t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsx(Ue,{title:"Notifications",arrow:!0,children:t.jsx(Y,{size:"small",sx:{color:"#1976d2"},onClick:()=>o(!0),children:t.jsxs(tt,{color:"error",invisible:C?.length===0,children:[t.jsx(Ge,{}),t.jsx("span",{className:"text-xs w-4  rounded-full bg-red-500 text-white h-4 ",children:C?.length})]})})}),t.jsx(_,{onClick:()=>h(!0),children:"Reset Password"}),t.jsx(He,{onLogout:m,name:f?.user?.name||"",email:f?.user?.email||"",profilePic:f?.user?.avatar||null})]})]}),f?.user?._id&&t.jsx(mt,{notificationOpen:n,setNotificationOpen:o,userId:f.user?._id}),r?t.jsx("div",{className:"grid grid-cols-1 p-5 mt-4 md:grid-cols-3 lg:grid-cols-5 gap-6",children:[...Array(5)].map((d,w)=>t.jsx(bt,{},w))}):Array.isArray(f?.ownership)&&f.ownership.length?t.jsx("div",{className:"grid grid-cols-1 p-5 mt-4 md:grid-cols-3 lg:grid-cols-5 gap-6",children:f?.ownership.map(d=>t.jsx(vt,{section:d.section,onDelete:()=>S(d._id)},d?.section?._id))}):t.jsxs("div",{className:"p-6 text-center text-gray-500 border border-dashed border-gray-300 rounded-lg",children:[t.jsx(F,{variant:"body1",gutterBottom:!0,children:"Admin, no sections have been created yet."}),t.jsx(F,{variant:"body2",children:"Ask your admin to create sections."})]}),t.jsxs(be,{open:a,onClose:()=>l(!1),children:[t.jsx(ye,{children:"Confirm Deletion"}),t.jsx(we,{children:t.jsx(Xe,{children:"Are you sure you want to delete this section? This action cannot be undone."})}),t.jsxs(Pe,{children:[t.jsx(_,{onClick:()=>l(!1),children:"Cancel"}),t.jsx(_,{color:"error",onClick:R,children:"Delete"})]})]}),t.jsx(xt,{open:i,onClose:()=>{h(!1)}})]})};export{jt as default};
