import{$ as f,r as c,j as e,x as d,I as p,a0 as j,t as w,B as C}from"./index-Dm6XyL4l.js";import{u as y}from"./useQuery-BbZ0NZ13.js";import{P as A}from"./Modal-CBLXFOlt.js";import{T as v}from"./TextField-BFRpBTkm.js";import{I,S as R,T as $,a as E,b as L,c as o,d as t,e as z}from"./Search-DxMsmx6_.js";import{V as B,E as _}from"./Visibility-DwHhsB8l.js";import{T as D}from"./TablePagination-BaxKHgFn.js";import"./Typography-DlwFXgy0.js";import"./MenuItem-WvtNfqpr.js";import"./dividerClasses-DHm6-sj7.js";const O=async({sectionId:a,page:r,limit:i,search:n})=>(await w.get(`${C}/api/campus/test/get/section/${a}`,{params:{page:r,limit:i,search:n},withCredentials:!0})).data,G=()=>{const{id:a}=f(),[r,i]=c.useState(0),[n,h]=c.useState(10),[l,g]=c.useState(""),{data:x,isLoading:u}=y({queryKey:["tests",a,r,n,l],queryFn:()=>O({sectionId:a,page:r+1,limit:n,search:l}),enabled:!!a,staleTime:1e3*60*5}),m=x?.tests??[],P=x?.totalTests??0,T=(s,b)=>i(b),S=s=>{h(parseInt(s.target.value,10)),i(0)};return e.jsxs(A,{sx:{p:3,borderRadius:3},children:[e.jsx(v,{value:l,onChange:s=>g(s.target.value),size:"small",placeholder:"Search tests...",sx:{mb:2,width:"100%",maxWidth:360},InputProps:{startAdornment:e.jsx(I,{position:"start",children:e.jsx(R,{})})}}),e.jsx($,{children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(o,{children:[e.jsx(t,{children:"Title"}),e.jsx(t,{children:"Category"}),e.jsx(t,{children:"Duration"}),e.jsx(t,{children:"Created By"}),e.jsx(t,{children:"Cost"}),e.jsx(t,{children:"Created At"}),e.jsx(t,{align:"center",children:"Actions"})]})}),e.jsx(z,{children:u?e.jsx(o,{children:e.jsx(t,{colSpan:7,align:"center",children:"Loading..."})}):m.length===0?e.jsx(o,{children:e.jsx(t,{colSpan:7,align:"center",children:"No Tests found."})}):m.map(s=>e.jsxs(o,{hover:!0,children:[e.jsx(t,{children:s.name}),e.jsx(t,{children:s.category}),e.jsxs(t,{children:[s.duration," min"]}),e.jsx(t,{children:s.creator?.name||"-"}),e.jsx(t,{children:s.costPerAttempt?e.jsx(d,{title:`Total: ${s.costPerAttempt} * ${s.noOfSubmissions}`,arrow:!0,children:e.jsx("span",{children:s.costPerAttempt*(s.noOfSubmissions||0)})}):"-"}),e.jsx(t,{children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"-"}),e.jsxs(t,{align:"center",children:[e.jsx(d,{title:"Preview Test",children:e.jsx(p,{component:j,to:`preview/${s._id}`,color:"primary",size:"small",children:e.jsx(B,{fontSize:"small"})})}),e.jsx(d,{title:"Edit Test",children:e.jsx(p,{component:j,to:`edit/${s._id}`,color:"warning",size:"small",children:e.jsx(_,{fontSize:"small"})})})]})]},s._id))})]})}),e.jsx(D,{component:"div",count:P,page:r,onPageChange:T,rowsPerPage:n,onRowsPerPageChange:S,rowsPerPageOptions:[5,10,20,50]})]})};export{G as default};
