function x(g){const h=g.split(/\r?\n/).map(t=>t.trim()).filter(t=>t.length>0),u=[];let i=[],n=[],r=1,c=0,a=null;const f=()=>{if(i.length===0)return;const t=i.join(`
`).trim();if(n.length>0){const e=n.filter(s=>s.isAnswer);if(e.length===0)throw new Error(`No ANSWER specified for question: "${t}"`);const o=e.length>1?"MSQ":"MCQ";u.push({question:t,category:o,marks:r,negative:c,options:n.map(s=>({text:s.text,isCorrect:s.isAnswer}))})}else a!==null&&u.push({question:t,category:"Text",marks:r,negative:c,answer:a});i=[],n=[],r=1,c=0,a=null};for(let t=0;t<h.length;t++){const e=h[t],o=e.match(/^([A-Z])\.\s+(.*)$/);if(o){n.push({key:o[1],text:o[2],isAnswer:!1});continue}const s=e.match(/^ANSWER:\s*(.+)$/i);if(s){const A=s[1].trim();n.length>0?A.split(",").map(l=>l.trim().charAt(0).toUpperCase()).forEach(l=>{const w=n.find(E=>E.key===l);if(!w)throw new Error(`Invalid ANSWER key '${l}' in question "${i.join(" ")}"`);w.isAnswer=!0}):a=A;continue}const p=e.match(/^MARKS:\s*([0-9]+(?:\.[0-9]+)?)$/i);if(p){r=parseFloat(p[1]);continue}const m=e.match(/^NEGATIVE:\s*(-?[0-9]+(?:\.[0-9]+)?)$/i);if(m){c=parseFloat(m[1]),f();continue}i.push(e)}return f(),u}export{x as p};
