import{a as J,g as E,r as n,u as D,j as o,s as k,c as G,e as z,i as Q,N as W,m as X,b as U,A as Y,C as Z,t as O,B as V}from"./index-68UMokMI.js";import{M as tt}from"./Modal-Dx7SlieA.js";import{T as I,t as q}from"./Typography-D_11Rz1t.js";import{L as T,i as et,c as st}from"./TextField-C3JwhYRB.js";import{g as ot,l as B}from"./MenuItem-C3t_Upzs.js";import{B as rt}from"./Button-DovyfzvG.js";import"./dividerClasses-H2CBsEGM.js";function nt(e){return J("MuiListItem",e)}E("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const at=E("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function it(e){return J("MuiListItemSecondaryAction",e)}E("MuiListItemSecondaryAction",["root","disableGutters"]);const lt=e=>{const{disableGutters:t,classes:s}=e;return z({root:["root",t&&"disableGutters"]},it,s)},dt=k("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),K=n.forwardRef(function(t,s){const r=D({props:t,name:"MuiListItemSecondaryAction"}),{className:a,...d}=r,i=n.useContext(T),c={...r,disableGutters:i.disableGutters},u=lt(c);return o.jsx(dt,{className:G(u.root,a),ownerState:c,ref:s,...d})});K.muiName="ListItemSecondaryAction";const ct=(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,s.alignItems==="flex-start"&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters,!s.disablePadding&&t.padding,s.hasSecondaryAction&&t.secondaryAction]},pt=e=>{const{alignItems:t,classes:s,dense:r,disableGutters:a,disablePadding:d,divider:i,hasSecondaryAction:c}=e;return z({root:["root",r&&"dense",!a&&"gutters",!d&&"padding",i&&"divider",t==="flex-start"&&"alignItemsFlexStart",c&&"secondaryAction"],container:["container"]},nt,s)},mt=k("div",{name:"MuiListItem",slot:"Root",overridesResolver:ct})(X(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${at.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),ut=k("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),yt=n.forwardRef(function(t,s){const r=D({props:t,name:"MuiListItem"}),{alignItems:a="center",children:d,className:i,component:c,components:u={},componentsProps:b={},ContainerComponent:x="li",ContainerProps:{className:P,...h}={},dense:v=!1,disableGutters:g=!1,disablePadding:p=!1,divider:l=!1,secondaryAction:m,slotProps:f={},slots:L={},...A}=r,M=n.useContext(T),R=n.useMemo(()=>({dense:v||M.dense||!1,alignItems:a,disableGutters:g}),[a,M.dense,v,g]),F=n.useRef(null),y=n.Children.toArray(d),N=y.length&&et(y[y.length-1],["ListItemSecondaryAction"]),S={...r,alignItems:a,dense:R.dense,disableGutters:g,disablePadding:p,divider:l,hasSecondaryAction:N},H=pt(S),_=Q(F,s),$=L.root||u.Root||mt,j=f.root||b.root||{},w={className:G(H.root,j.className,i),...A};let C=c||"li";return N?(C=!w.component&&!c?"div":C,x==="li"&&(C==="li"?C="div":w.component==="li"&&(w.component="div")),o.jsx(T.Provider,{value:R,children:o.jsxs(ut,{as:x,className:G(H.container,P),ref:_,ownerState:S,...h,children:[o.jsx($,{...j,...!W($)&&{as:C,ownerState:{...S,...j.ownerState}},...w,children:y}),y.pop()]})})):o.jsx(T.Provider,{value:R,children:o.jsxs($,{...j,as:C,ref:_,...!W($)&&{ownerState:{...S,...j.ownerState}},...w,children:[y,m&&o.jsx(K,{children:m})]})})}),gt=e=>{const{classes:t,inset:s,primary:r,secondary:a,dense:d}=e;return z({root:["root",s&&"inset",d&&"dense",r&&a&&"multiline"],primary:["primary"],secondary:["secondary"]},ot,t)},ft=k("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${B.primary}`]:t.primary},{[`& .${B.secondary}`]:t.secondary},t.root,s.inset&&t.inset,s.primary&&s.secondary&&t.multiline,s.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${q.root}:where(& .${B.primary})`]:{display:"block"},[`.${q.root}:where(& .${B.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),xt=n.forwardRef(function(t,s){const r=D({props:t,name:"MuiListItemText"}),{children:a,className:d,disableTypography:i=!1,inset:c=!1,primary:u,primaryTypographyProps:b,secondary:x,secondaryTypographyProps:P,slots:h={},slotProps:v={},...g}=r,{dense:p}=n.useContext(T);let l=u??a,m=x;const f={...r,disableTypography:i,inset:c,primary:!!l,secondary:!!m,dense:p},L=gt(f),A={slots:h,slotProps:{primary:b,secondary:P,...v}},[M,R]=U("root",{className:G(L.root,d),elementType:ft,externalForwardedProps:{...A,...g},ownerState:f,ref:s}),[F,y]=U("primary",{className:L.primary,elementType:I,externalForwardedProps:A,ownerState:f}),[N,S]=U("secondary",{className:L.secondary,elementType:I,externalForwardedProps:A,ownerState:f});return l!=null&&l.type!==I&&!i&&(l=o.jsx(F,{variant:p?"body2":"body1",component:y?.variant?void 0:"span",...y,children:l})),m!=null&&m.type!==I&&!i&&(m=o.jsx(N,{variant:"body2",color:"textSecondary",...S,children:m})),o.jsxs(M,{...R,children:[l,m]})}),ht={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:800,maxHeight:"80vh",bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:4,overflowY:"auto"};function At({open:e,onClose:t,onSuccess:s,testId:r,sectionId:a}){const[d,i]=n.useState([]),[c,u]=n.useState(1),[b,x]=n.useState(!1),[P,h]=n.useState(!0);n.useEffect(()=>{e&&(async()=>{x(!0);try{const m=(await O.get(`${V}/api/admin/problems?search=&category=&difficulty=&isAvailable=&page=${c}&limit=10&sortBy=createdAt&sortOrder=desc`,{withCredentials:!0})).data.data||[];i(f=>[...f,...m]),h(m.length>0)}catch(l){console.error("Error fetching problems:",l),h(!1)}finally{x(!1)}})()},[c,e]);const v=async p=>{try{await O.post(`${V}/api/admin/tests/${r}/sections/${a}/problem`,{problemId:p},{withCredentials:!0}),alert("Problem added successfully!"),s(),g()}catch(l){console.error("Failed to add problem:",l),alert("Failed to add problem")}},g=()=>{i([]),u(1),h(!0),t()};return o.jsx(tt,{open:e,onClose:g,children:o.jsxs(Y,{sx:ht,children:[o.jsx(I,{variant:"h6",mb:2,children:"Select Problem to Add"}),o.jsx(st,{children:d.map(p=>o.jsx(yt,{divider:!0,secondaryAction:o.jsx(rt,{size:"small",variant:"contained",onClick:()=>v(p._id),children:"Add"}),children:o.jsx(xt,{primary:p.title,secondary:`Difficulty: ${p.difficulty}`})},p._id))}),b&&o.jsx(Y,{className:"flex justify-center mt-4",children:o.jsx(Z,{size:24})}),!b&&!P&&d.length===0&&o.jsx(I,{className:"text-center mt-4",color:"textSecondary",children:"No problems found."})]})})}export{At as default};
